(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
function rand(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}
var Bezier = /** @class */ (function () {
    function Bezier(cp1x, cp1y, cp2x, cp2y, x, y) {
        var vm = this;
        vm.cp1x = cp1x;
        vm.cp1y = cp1y;
        vm.cp2x = cp2x;
        vm.cp2y = cp2y;
        vm.x = x;
        vm.y = y;
    }
    return Bezier;
}());
var Mountain = /** @class */ (function () {
    function Mountain(w, h, range_min, range_max) {
        var vm = this;
        vm.canvas = document.createElement('canvas');
        vm.canvas.width = w;
        vm.canvas.height = h;
        vm.ctx = vm.canvas.getContext('2d');
        vm.w = w;
        vm.h = h;
        vm.range_min = range_min;
        vm.range_max = range_max;
        vm.left = 0;
        vm.right = w;
        vm.curves = [];
        vm.height = Math.round(h / 2);
        vm.y_pos = rand(0, 4) * 32 * Math.PI / 256;
        vm.x_pos = 0;
        vm.translate = 0;
        vm.n_translated = 1;
        vm.generate_bound = 5000;
        var new_x = 0;
        var new_y = rand(vm.range_min, vm.range_max);
        var slope_y;
        var slope_x;
        var new_slope_x;
        var new_slope_y;
        var tension = 250;
        new_slope_x = new_x + rand(-tension, 0);
        new_slope_y = new_y + rand(-tension, 0);
        vm.curves.push(new Bezier(slope_x, slope_y, new_slope_x, new_slope_y, new_x, new_y));
        vm.generate();
        console.log(vm.curves);
    }
    Mountain.prototype.generate = function () {
        var vm = this;
        var new_x = vm.curves[vm.curves.length - 1].x;
        var new_y = vm.curves[vm.curves.length - 1].y;
        var slope_y;
        var slope_x;
        var new_slope_x = vm.curves[vm.curves.length - 1].cp2x;
        var new_slope_y = vm.curves[vm.curves.length - 1].cp2y;
        ;
        var tension = 250;
        while (new_x < vm.generate_bound * vm.n_translated) {
            slope_x = 2 * new_x - new_slope_x;
            slope_y = 2 * new_y - new_slope_y;
            new_x += rand(35, 40) * 10;
            // new_y += rand(-150, 150);
            // while (new_y > vm.range_min && new_y > vm.range_max) {
            //     new_y += rand(-150, 150);
            // }
            new_slope_x = new_x + rand(-tension * 3 / 4, -tension / 8);
            new_slope_y = new_y + rand(-tension, -tension / 2);
            vm.curves.push(new Bezier(slope_x, slope_y, new_slope_x, new_slope_y, new_x, new_y));
        }
    };
    Mountain.prototype.increment = function (increment) {
        this.translate += increment;
    };
    Mountain.prototype.animate = function () {
        var vm = this;
        for (var i = 0; i < vm.curves.length; i++) {
            vm.curves[i].cp2y += Math.sin(vm.y_pos) * vm.h / 500;
            vm.curves[i].cp1y -= Math.sin(vm.y_pos) * vm.h / 500;
        }
        vm.y_pos += Math.PI / 256;
    };
    Mountain.prototype.conditional = function () {
        var vm = this;
        if (vm.translate > vm.generate_bound - vm.w) {
            vm.translate = 0;
            vm.n_translated++;
            console.log(vm.n_translated * vm.generate_bound);
            vm.generate();
            console.log(vm.curves.length);
        }
    };
    Mountain.prototype.draw = function (color) {
        var vm = this;
        vm.conditional();
        vm.animate();
        vm.ctx.beginPath();
        vm.ctx.moveTo(0, vm.curves[0].y);
        for (var i = 0; i < vm.curves.length; i++) {
            vm.ctx.bezierCurveTo(vm.curves[i].cp1x, vm.curves[i].cp1y, vm.curves[i].cp2x, vm.curves[i].cp2y, vm.curves[i].x, vm.curves[i].y);
            // vm.ctx.lineTo(vm.curves[i].x, vm.curves[i].y);
        }
        vm.ctx.lineTo(vm.curves[vm.curves.length - 1].x, vm.h);
        vm.ctx.lineTo(-50, vm.h);
        vm.ctx.closePath();
        // vm.ctx.strokeStyle = "rgba(0,0,0,1)";
        // vm.ctx.lineWidth = 1;
        // vm.ctx.stroke();
        var grad = vm.ctx.createLinearGradient(0, vm.curves[0].y - 250, 0, vm.h);
        var opac_color = color.replace(', 1)', ', 0.001)');
        grad.addColorStop(0, opac_color);
        grad.addColorStop(1, color);
        vm.ctx.fillStyle = grad;
        vm.ctx.fill();
    };
    return Mountain;
}());
var App = /** @class */ (function () {
    function App() {
        //Codepen doesn't like generics :'(
        // this.canvas = <HTMLCanvasElement>document.getElementById('canvas');
        var vm = this;
        vm.canvas = document.getElementById('canvas');
        vm.ctx = vm.canvas.getContext('2d');
        vm.sizeCanvas();
        vm.initEvents();
        window.requestAnimationFrame(function (t) { vm.draw(t); });
        console.log(vm);
        vm.mountain = new Mountain(vm.w, vm.h, 2 * vm.h / 16, 2 * vm.h / 16 + 25);
        vm.ctx.drawImage(vm.mountain.canvas, 0, 0, this.w, this.h);
        console.log(vm.mountain.ctx);
        vm.mountain2 = new Mountain(vm.w, vm.h, 6 * vm.h / 16, 6 * vm.h / 16 + 25);
        vm.ctx.drawImage(vm.mountain2.canvas, 0, 0, this.w, this.h);
        vm.mountain3 = new Mountain(vm.w, vm.h, 10 * vm.h / 16, 10 * vm.h / 16 + 25);
        vm.ctx.drawImage(vm.mountain3.canvas, 0, 0, this.w, this.h);
        vm.mountain4 = new Mountain(vm.w, vm.h, 14 * vm.h / 16, 14 * vm.h / 16 + 25);
        vm.ctx.drawImage(vm.mountain3.canvas, 0, 0, this.w, this.h);
    }
    App.prototype.sizeCanvas = function () {
        var vm = this;
        this.w = this.canvas.width = window.innerWidth;
        this.h = this.canvas.height = window.innerHeight;
    };
    App.prototype.draw = function (t) {
        var _this = this;
        var vm = this;
        window.requestAnimationFrame(function (t) { _this.draw(t); });
        vm.ctx.clearRect(0, 0, vm.w, vm.h);
        vm.ctx.fillStyle = "rgba(29,98,255, 1)";
        vm.ctx.fill();
        vm.ctx.fillRect(0, 0, vm.w, vm.h);
        vm.mountain.ctx.clearRect(0, 0, 50000, vm.h);
        vm.mountain.draw("rgba(10, 171, 232, 1)");
        vm.mountain.ctx.translate(-1, 0);
        vm.mountain.increment(1);
        vm.ctx.drawImage(vm.mountain.canvas, 0, 0, this.w, this.h);
        vm.mountain2.ctx.clearRect(0, 0, 50000, vm.h);
        vm.mountain2.draw("rgba(2, 255, 216, 1)");
        vm.mountain2.ctx.translate(-0.8, 0);
        vm.mountain2.increment(0.8);
        vm.ctx.drawImage(vm.mountain2.canvas, 0, 0, this.w, this.h);
        vm.mountain3.ctx.clearRect(0, 0, 50000, vm.h);
        vm.mountain3.draw("rgba(2, 255, 111, 1)");
        vm.mountain3.ctx.translate(-1.8, 0);
        vm.mountain3.increment(1.8);
        vm.ctx.drawImage(vm.mountain3.canvas, 0, 0, this.w, this.h);
        vm.mountain4.ctx.clearRect(0, 0, 50000, vm.h);
        vm.mountain4.draw("rgba(27, 255, 11, 1)");
        vm.mountain4.ctx.translate(-1.2, 0);
        vm.mountain4.increment(1.2);
        vm.ctx.drawImage(vm.mountain4.canvas, 0, 0, this.w, this.h);
    };
    App.prototype.initEvents = function () {
        var _this = this;
        window.onresize = function (e) {
            _this.sizeCanvas();
            _this.ctx.drawImage(_this.mountain.canvas, 0, 0, _this.w, _this.h);
        };
    };
    return App;
}());
var app = new App();
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLGNBQWMsR0FBRyxFQUFFLEdBQUc7SUFDbEIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDN0QsQ0FBQztBQUVEO0lBUUksZ0JBQVksSUFBWSxFQUFFLElBQVksRUFBRSxJQUFZLEVBQUUsSUFBWSxFQUFFLENBQVMsRUFBRSxDQUFTO1FBQ3BGLElBQU0sRUFBRSxHQUFHLElBQUksQ0FBQztRQUNoQixFQUFFLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNmLEVBQUUsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2YsRUFBRSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDZixFQUFFLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNmLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1QsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDYixDQUFDO0lBQ0wsYUFBQztBQUFELENBakJBLEFBaUJDLElBQUE7QUFJRDtJQW9CSSxrQkFBWSxDQUFTLEVBQUUsQ0FBUyxFQUFFLFNBQWlCLEVBQUUsU0FBaUI7UUFDbEUsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLEVBQUUsQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM3QyxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDcEIsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENB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QUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDM0UsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUU1RCxFQUFFLENBQUMsU0FBUyxHQUFHLElBQUksUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQzdFLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFNUQsRUFBRSxDQUFDLFNBQVMsR0FBRyxJQUFJLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUM3RSxFQUFFLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBR2hFLENBQUM7SUFFRCx3QkFBVSxHQUFWO1FBQ0ksSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQztRQUMvQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUM7SUFFckQsQ0FBQztJQUNELGtCQUFJLEdBQUosVUFBSyxDQUFNO1FBQVgsaUJBeUNDO1FBeENHLElBQU0sRUFBRSxHQUFHLElBQUksQ0FBQztRQUNoQixNQUFNLENBQUMscUJBQXFCLENBQUMsVUFBQyxDQUFDLElBQU8sS0FBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXZELEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFbkMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUUsb0JBQW9CLENBQUM7UUFDdkMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNkLEVBQUUsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFHakMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3QyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1FBQzFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNqQyxFQUFFLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QixFQUFFLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTNELEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUMxQyxFQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDcEMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDNUIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUU1RCxFQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlDLEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFDMUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEVBQUUsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRTVCLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFNUQsRUFBRSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5QyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQzFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNwQyxFQUFFLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM1QixFQUFFLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBT2hFLENBQUM7SUFJRCx3QkFBVSxHQUFWO1FBQUEsaUJBS0M7UUFKRyxNQUFNLENBQUMsUUFBUSxHQUFHLFVBQUMsQ0FBQztZQUNoQixLQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDbEIsS0FBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsS0FBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFJLENBQUMsQ0FBQyxFQUFFLEtBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuRSxDQUFDLENBQUM7SUFDTixDQUFDO0lBRUwsVUFBQztBQUFELENBbkdBLEFBbUdDLElBQUE7QUFFRCxJQUFJLEdBQUcsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiZnVuY3Rpb24gcmFuZChtaW4sIG1heCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxufVxyXG5cclxuY2xhc3MgQmV6aWVyIHtcclxuICAgIGNwMXg6IG51bWJlcjtcclxuICAgIGNwMXk6IG51bWJlcjtcclxuICAgIGNwMng6IG51bWJlcjtcclxuICAgIGNwMnk6IG51bWJlcjtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjcDF4OiBudW1iZXIsIGNwMXk6IG51bWJlciwgY3AyeDogbnVtYmVyLCBjcDJ5OiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLmNwMXggPSBjcDF4O1xyXG4gICAgICAgIHZtLmNwMXkgPSBjcDF5O1xyXG4gICAgICAgIHZtLmNwMnggPSBjcDJ4O1xyXG4gICAgICAgIHZtLmNwMnkgPSBjcDJ5O1xyXG4gICAgICAgIHZtLnggPSB4O1xyXG4gICAgICAgIHZtLnkgPSB5O1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbmNsYXNzIE1vdW50YWluIHtcclxuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIGxlZnQ6IG51bWJlcjtcclxuICAgIHJpZ2h0OiBudW1iZXI7XHJcbiAgICBjdXJ2ZXM6IEJlemllcltdO1xyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgdHJhbnNsYXRlOiBudW1iZXI7XHJcbiAgICBuX3RyYW5zbGF0ZWQ6IG51bWJlcjtcclxuICAgIGdlbmVyYXRlX2JvdW5kOm51bWJlcjtcclxuXHJcbiAgICB3OiBudW1iZXI7XHJcbiAgICBoOiBudW1iZXI7XHJcbiAgICByYW5nZV9taW46IG51bWJlcjtcclxuICAgIHJhbmdlX21heDogbnVtYmVyO1xyXG5cclxuICAgIHlfcG9zOiBudW1iZXI7XHJcbiAgICB4X3BvczogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHc6IG51bWJlciwgaDogbnVtYmVyLCByYW5nZV9taW46IG51bWJlciwgcmFuZ2VfbWF4OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgdm0uY2FudmFzLndpZHRoID0gdztcclxuICAgICAgICB2bS5jYW52YXMuaGVpZ2h0ID0gaDtcclxuICAgICAgICB2bS5jdHggPSB2bS5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICAgICAgdm0udyA9IHc7XHJcbiAgICAgICAgdm0uaCA9IGg7XHJcbiAgICAgICAgdm0ucmFuZ2VfbWluID0gcmFuZ2VfbWluO1xyXG4gICAgICAgIHZtLnJhbmdlX21heCA9IHJhbmdlX21heDtcclxuXHJcbiAgICAgICAgdm0ubGVmdCA9IDA7XHJcbiAgICAgICAgdm0ucmlnaHQgPSB3O1xyXG5cclxuICAgICAgICB2bS5jdXJ2ZXMgPSBbXTtcclxuICAgICAgICB2bS5oZWlnaHQgPSBNYXRoLnJvdW5kKGggLyAyKTtcclxuXHJcbiAgICAgICAgdm0ueV9wb3MgPSByYW5kKDAsIDQpICogMzIgKiBNYXRoLlBJIC8gMjU2O1xyXG4gICAgICAgIHZtLnhfcG9zID0gMDtcclxuXHJcbiAgICAgICAgdm0udHJhbnNsYXRlID0gMDtcclxuICAgICAgICB2bS5uX3RyYW5zbGF0ZWQgPSAxO1xyXG4gICAgICAgIHZtLmdlbmVyYXRlX2JvdW5kID0gNTAwMDtcclxuXHJcbiAgICAgICAgdmFyIG5ld194ID0gMDtcclxuICAgICAgICB2YXIgbmV3X3kgPSByYW5kKHZtLnJhbmdlX21pbiwgdm0ucmFuZ2VfbWF4KTtcclxuXHJcblxyXG4gICAgICAgIHZhciBzbG9wZV95O1xyXG4gICAgICAgIHZhciBzbG9wZV94O1xyXG5cclxuICAgICAgICB2YXIgbmV3X3Nsb3BlX3g7XHJcbiAgICAgICAgdmFyIG5ld19zbG9wZV95O1xyXG5cclxuICAgICAgICB2YXIgdGVuc2lvbiA9IDI1MDtcclxuXHJcbiAgICAgICAgbmV3X3Nsb3BlX3ggPSBuZXdfeCArIHJhbmQoLXRlbnNpb24sIDApO1xyXG4gICAgICAgIG5ld19zbG9wZV95ID0gbmV3X3kgKyByYW5kKC10ZW5zaW9uLCAwKTtcclxuXHJcbiAgICAgICAgdm0uY3VydmVzLnB1c2gobmV3IEJlemllcihzbG9wZV94LCBzbG9wZV95LCBuZXdfc2xvcGVfeCwgbmV3X3Nsb3BlX3ksIG5ld194LCBuZXdfeSkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZtLmdlbmVyYXRlKCk7XHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyh2bS5jdXJ2ZXMpO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGUoKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICB2YXIgbmV3X3ggPSB2bS5jdXJ2ZXNbdm0uY3VydmVzLmxlbmd0aCAtIDFdLng7XHJcbiAgICAgICAgdmFyIG5ld195ID0gdm0uY3VydmVzW3ZtLmN1cnZlcy5sZW5ndGggLSAxXS55O1xyXG5cclxuXHJcbiAgICAgICAgdmFyIHNsb3BlX3k7XHJcbiAgICAgICAgdmFyIHNsb3BlX3g7XHJcblxyXG4gICAgICAgIHZhciBuZXdfc2xvcGVfeCA9IHZtLmN1cnZlc1t2bS5jdXJ2ZXMubGVuZ3RoIC0gMV0uY3AyeDtcclxuICAgICAgICB2YXIgbmV3X3Nsb3BlX3kgPSB2bS5jdXJ2ZXNbdm0uY3VydmVzLmxlbmd0aCAtIDFdLmNwMnk7O1xyXG5cclxuICAgICAgICB2YXIgdGVuc2lvbiA9IDI1MDtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgd2hpbGUgKG5ld194IDwgdm0uZ2VuZXJhdGVfYm91bmQgKiB2bS5uX3RyYW5zbGF0ZWQpIHtcclxuICAgICAgICAgICAgc2xvcGVfeCA9IDIgKiBuZXdfeCAtIG5ld19zbG9wZV94O1xyXG4gICAgICAgICAgICBzbG9wZV95ID0gMiAqIG5ld195IC0gbmV3X3Nsb3BlX3k7XHJcbiAgICAgICAgICAgIG5ld194ICs9IHJhbmQoMzUsIDQwKSAqIDEwO1xyXG4gICAgICAgICAgICAvLyBuZXdfeSArPSByYW5kKC0xNTAsIDE1MCk7XHJcbiAgICAgICAgICAgIC8vIHdoaWxlIChuZXdfeSA+IHZtLnJhbmdlX21pbiAmJiBuZXdfeSA+IHZtLnJhbmdlX21heCkge1xyXG4gICAgICAgICAgICAvLyAgICAgbmV3X3kgKz0gcmFuZCgtMTUwLCAxNTApO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIG5ld19zbG9wZV94ID0gbmV3X3ggKyByYW5kKC10ZW5zaW9uICogMyAvIDQsIC10ZW5zaW9uIC8gOCk7XHJcbiAgICAgICAgICAgIG5ld19zbG9wZV95ID0gbmV3X3kgKyByYW5kKC10ZW5zaW9uLCAtdGVuc2lvbiAvIDIpO1xyXG4gICAgICAgICAgICB2bS5jdXJ2ZXMucHVzaChuZXcgQmV6aWVyKHNsb3BlX3gsIHNsb3BlX3ksIG5ld19zbG9wZV94LCBuZXdfc2xvcGVfeSwgbmV3X3gsIG5ld195KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluY3JlbWVudChpbmNyZW1lbnQpe1xyXG4gICAgICAgIHRoaXMudHJhbnNsYXRlICs9IGluY3JlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBhbmltYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLmN1cnZlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2bS5jdXJ2ZXNbaV0uY3AyeSArPSBNYXRoLnNpbih2bS55X3BvcykgKiB2bS5oLzUwMDtcclxuICAgICAgICAgICAgdm0uY3VydmVzW2ldLmNwMXkgLT0gTWF0aC5zaW4odm0ueV9wb3MpICogdm0uaC81MDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZtLnlfcG9zICs9IE1hdGguUEkgLyAyNTY7XHJcbiAgICB9XHJcblxyXG4gICAgY29uZGl0aW9uYWwoKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIGlmKHZtLnRyYW5zbGF0ZSA+IHZtLmdlbmVyYXRlX2JvdW5kIC0gdm0udyl7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2bS50cmFuc2xhdGUgPSAwO1xyXG4gICAgICAgICAgICB2bS5uX3RyYW5zbGF0ZWQrKztcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZtLm5fdHJhbnNsYXRlZCp2bS5nZW5lcmF0ZV9ib3VuZCk7XHJcbiAgICAgICAgICAgIHZtLmdlbmVyYXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZtLmN1cnZlcy5sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgZHJhdyhjb2xvcjogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICB2bS5jb25kaXRpb25hbCgpO1xyXG4gICAgICAgIHZtLmFuaW1hdGUoKTtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgdm0uY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHZtLmN0eC5tb3ZlVG8oMCwgdm0uY3VydmVzWzBdLnkpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uY3VydmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZtLmN0eC5iZXppZXJDdXJ2ZVRvKHZtLmN1cnZlc1tpXS5jcDF4LCB2bS5jdXJ2ZXNbaV0uY3AxeSwgdm0uY3VydmVzW2ldLmNwMngsIHZtLmN1cnZlc1tpXS5jcDJ5LCB2bS5jdXJ2ZXNbaV0ueCwgdm0uY3VydmVzW2ldLnkpO1xyXG4gICAgICAgICAgICAvLyB2bS5jdHgubGluZVRvKHZtLmN1cnZlc1tpXS54LCB2bS5jdXJ2ZXNbaV0ueSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2bS5jdHgubGluZVRvKHZtLmN1cnZlc1t2bS5jdXJ2ZXMubGVuZ3RoIC0gMV0ueCwgdm0uaCk7XHJcbiAgICAgICAgdm0uY3R4LmxpbmVUbygtNTAsIHZtLmgpO1xyXG4gICAgICAgIHZtLmN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAvLyB2bS5jdHguc3Ryb2tlU3R5bGUgPSBcInJnYmEoMCwwLDAsMSlcIjtcclxuICAgICAgICAvLyB2bS5jdHgubGluZVdpZHRoID0gMTtcclxuICAgICAgICAvLyB2bS5jdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgICAgIHZhciBncmFkID0gdm0uY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIHZtLmN1cnZlc1swXS55IC0gMjUwLCAwLCB2bS5oKTtcclxuICAgICAgICB2YXIgb3BhY19jb2xvciA9IGNvbG9yLnJlcGxhY2UoJywgMSknLCAnLCAwLjAwMSknKTtcclxuXHJcbiAgICAgICAgZ3JhZC5hZGRDb2xvclN0b3AoMCwgb3BhY19jb2xvcik7XHJcbiAgICAgICAgZ3JhZC5hZGRDb2xvclN0b3AoMSwgY29sb3IpO1xyXG5cclxuICAgICAgICB2bS5jdHguZmlsbFN0eWxlID0gZ3JhZDtcclxuICAgICAgICB2bS5jdHguZmlsbCgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuY2xhc3MgQXBwIHtcclxuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIG1vdW50YWluOiBNb3VudGFpbjtcclxuICAgIG1vdW50YWluMjogTW91bnRhaW47XHJcbiAgICBtb3VudGFpbjM6IE1vdW50YWluO1xyXG4gICAgbW91bnRhaW40OiBNb3VudGFpbjtcclxuICAgIG9mZnNldDogbnVtYmVyO1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvL0NvZGVwZW4gZG9lc24ndCBsaWtlIGdlbmVyaWNzIDonKFxyXG4gICAgICAgIC8vIHRoaXMuY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZtLmNhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJyk7XHJcbiAgICAgICAgdm0uY3R4ID0gdm0uY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgICAgIHZtLnNpemVDYW52YXMoKTtcclxuICAgICAgICB2bS5pbml0RXZlbnRzKCk7XHJcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgodCkgPT4geyB2bS5kcmF3KHQpOyB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZyh2bSk7XHJcblxyXG4gICAgICAgIHZtLm1vdW50YWluID0gbmV3IE1vdW50YWluKHZtLncsIHZtLmgsIDIgKiB2bS5oIC8gMTYsIDIgKiB2bS5oIC8gMTYgKyAyNSk7XHJcbiAgICAgICAgdm0uY3R4LmRyYXdJbWFnZSh2bS5tb3VudGFpbi5jYW52YXMsIDAsIDAsIHRoaXMudywgdGhpcy5oKTtcclxuICAgICAgICBjb25zb2xlLmxvZyh2bS5tb3VudGFpbi5jdHgpXHJcblxyXG4gICAgICAgIHZtLm1vdW50YWluMiA9IG5ldyBNb3VudGFpbih2bS53LCB2bS5oLCA2ICogdm0uaCAvIDE2LCA2ICogdm0uaCAvIDE2ICsgMjUpO1xyXG4gICAgICAgIHZtLmN0eC5kcmF3SW1hZ2Uodm0ubW91bnRhaW4yLmNhbnZhcywgMCwgMCwgdGhpcy53LCB0aGlzLmgpO1xyXG5cclxuICAgICAgICB2bS5tb3VudGFpbjMgPSBuZXcgTW91bnRhaW4odm0udywgdm0uaCwgMTAgKiB2bS5oIC8gMTYsIDEwICogdm0uaCAvIDE2ICsgMjUpO1xyXG4gICAgICAgIHZtLmN0eC5kcmF3SW1hZ2Uodm0ubW91bnRhaW4zLmNhbnZhcywgMCwgMCwgdGhpcy53LCB0aGlzLmgpO1xyXG5cclxuICAgICAgICB2bS5tb3VudGFpbjQgPSBuZXcgTW91bnRhaW4odm0udywgdm0uaCwgMTQgKiB2bS5oIC8gMTYsIDE0ICogdm0uaCAvIDE2ICsgMjUpO1xyXG4gICAgICAgIHZtLmN0eC5kcmF3SW1hZ2Uodm0ubW91bnRhaW4zLmNhbnZhcywgMCwgMCwgdGhpcy53LCB0aGlzLmgpO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgc2l6ZUNhbnZhcygpIHtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy53ID0gdGhpcy5jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICB0aGlzLmggPSB0aGlzLmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gICAgfVxyXG4gICAgZHJhdyh0OiBhbnkpIHtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgodCkgPT4geyB0aGlzLmRyYXcodCk7IH0pO1xyXG5cclxuICAgICAgICB2bS5jdHguY2xlYXJSZWN0KDAsIDAsIHZtLncsIHZtLmgpO1xyXG5cclxuICAgICAgICB2bS5jdHguZmlsbFN0eWxlID1cInJnYmEoMjksOTgsMjU1LCAxKVwiO1xyXG4gICAgICAgIHZtLmN0eC5maWxsKCk7XHJcbiAgICAgICAgdm0uY3R4LmZpbGxSZWN0KDAsMCwgdm0udywgdm0uaCk7XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHZtLm1vdW50YWluLmN0eC5jbGVhclJlY3QoMCwgMCwgNTAwMDAsIHZtLmgpO1xyXG4gICAgICAgIHZtLm1vdW50YWluLmRyYXcoXCJyZ2JhKDEwLCAxNzEsIDIzMiwgMSlcIik7XHJcbiAgICAgICAgdm0ubW91bnRhaW4uY3R4LnRyYW5zbGF0ZSgtMSwgMCk7XHJcbiAgICAgICAgdm0ubW91bnRhaW4uaW5jcmVtZW50KDEpO1xyXG4gICAgICAgIHZtLmN0eC5kcmF3SW1hZ2Uodm0ubW91bnRhaW4uY2FudmFzLCAwLCAwLCB0aGlzLncsIHRoaXMuaCk7XHJcblxyXG4gICAgICAgIHZtLm1vdW50YWluMi5jdHguY2xlYXJSZWN0KDAsIDAsIDUwMDAwLCB2bS5oKTtcclxuICAgICAgICB2bS5tb3VudGFpbjIuZHJhdyhcInJnYmEoMiwgMjU1LCAyMTYsIDEpXCIpO1xyXG4gICAgICAgIHZtLm1vdW50YWluMi5jdHgudHJhbnNsYXRlKC0wLjgsIDApO1xyXG4gICAgICAgIHZtLm1vdW50YWluMi5pbmNyZW1lbnQoMC44KTtcclxuICAgICAgICB2bS5jdHguZHJhd0ltYWdlKHZtLm1vdW50YWluMi5jYW52YXMsIDAsIDAsIHRoaXMudywgdGhpcy5oKTtcclxuXHJcbiAgICAgICAgdm0ubW91bnRhaW4zLmN0eC5jbGVhclJlY3QoMCwgMCwgNTAwMDAsIHZtLmgpO1xyXG4gICAgICAgIHZtLm1vdW50YWluMy5kcmF3KFwicmdiYSgyLCAyNTUsIDExMSwgMSlcIik7XHJcbiAgICAgICAgdm0ubW91bnRhaW4zLmN0eC50cmFuc2xhdGUoLTEuOCwgMCk7XHJcbiAgICAgICAgdm0ubW91bnRhaW4zLmluY3JlbWVudCgxLjgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZtLmN0eC5kcmF3SW1hZ2Uodm0ubW91bnRhaW4zLmNhbnZhcywgMCwgMCwgdGhpcy53LCB0aGlzLmgpO1xyXG5cclxuICAgICAgICB2bS5tb3VudGFpbjQuY3R4LmNsZWFyUmVjdCgwLCAwLCA1MDAwMCwgdm0uaCk7XHJcbiAgICAgICAgdm0ubW91bnRhaW40LmRyYXcoXCJyZ2JhKDI3LCAyNTUsIDExLCAxKVwiKTtcclxuICAgICAgICB2bS5tb3VudGFpbjQuY3R4LnRyYW5zbGF0ZSgtMS4yLCAwKTtcclxuICAgICAgICB2bS5tb3VudGFpbjQuaW5jcmVtZW50KDEuMik7XHJcbiAgICAgICAgdm0uY3R4LmRyYXdJbWFnZSh2bS5tb3VudGFpbjQuY2FudmFzLCAwLCAwLCB0aGlzLncsIHRoaXMuaCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBpbml0RXZlbnRzKCkge1xyXG4gICAgICAgIHdpbmRvdy5vbnJlc2l6ZSA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZUNhbnZhcygpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UodGhpcy5tb3VudGFpbi5jYW52YXMsIDAsIDAsIHRoaXMudywgdGhpcy5oKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxudmFyIGFwcCA9IG5ldyBBcHAoKTsiXX0=
