(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function rand(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}
var Bezier = (function () {
    function Bezier(cp1x, cp1y, cp2x, cp2y, x, y) {
        var vm = this;
        vm.cp1x = cp1x;
        vm.cp1y = cp1y;
        vm.cp2x = cp2x;
        vm.cp2y = cp2y;
        vm.x = x;
        vm.y = y;
    }
    return Bezier;
}());
var Mountain = (function () {
    function Mountain(w, h, range_min, range_max) {
        var vm = this;
        vm.canvas = document.createElement('canvas');
        vm.canvas.width = w;
        vm.canvas.height = h;
        vm.ctx = vm.canvas.getContext('2d');
        vm.w = w;
        vm.h = h;
        vm.range_min = range_min;
        vm.range_max = range_max;
        console.dir(vm.canvas);
        vm.left = 0;
        vm.right = w;
        vm.curves = [];
        vm.height = Math.round(h / 2);
        vm.y_pos = rand(0, 4) * 32 * Math.PI / 256;
        vm.x_pos = 0;
        var new_x = 0;
        var new_y = rand(range_min, range_max);
        var slope_y;
        var slope_x;
        var new_slope_x;
        var new_slope_y;
        var tension = 250;
        new_slope_x = new_x + rand(-tension, 0);
        new_slope_y = new_y + rand(-tension, 0);
        vm.curves.push(new Bezier(slope_x, slope_y, new_slope_x, new_slope_y, new_x, new_y));
        while (new_x < 5000) {
            slope_x = 2 * new_x - new_slope_x;
            slope_y = 2 * new_y - new_slope_y;
            new_x += rand(35, 40) * 10;
            new_y += rand(-150, 150);
            while (new_y > range_min && new_y > range_max) {
                new_y += rand(-150, 150);
            }
            new_slope_x = new_x + rand(-tension * 3 / 4, -tension / 8);
            new_slope_y = new_y + rand(-tension, -tension / 2);
            vm.curves.push(new Bezier(slope_x, slope_y, new_slope_x, new_slope_y, new_x, new_y));
        }
        console.log(vm.curves);
    }
    Mountain.prototype.animate = function () {
        var vm = this;
        for (var i = 0; i < vm.curves.length - 1; i++) {
            vm.curves[i].cp2y += Math.sin(vm.y_pos) * 4;
            vm.curves[i].cp1y -= Math.sin(vm.y_pos) * 4;
        }
        vm.y_pos += Math.PI / 256;
    };
    Mountain.prototype.draw = function (color) {
        var vm = this;
        vm.animate();
        vm.ctx.beginPath();
        vm.ctx.moveTo(0, vm.curves[0].y);
        for (var i = 0; i < vm.curves.length; i++) {
            vm.ctx.bezierCurveTo(vm.curves[i].cp1x, vm.curves[i].cp1y, vm.curves[i].cp2x, vm.curves[i].cp2y, vm.curves[i].x, vm.curves[i].y);
        }
        vm.ctx.lineTo(vm.curves[vm.curves.length - 1].x, vm.h);
        vm.ctx.lineTo(-50, vm.h);
        vm.ctx.closePath();
        // vm.ctx.closePath();
        // vm.ctx.strokeStyle = "rgba(0,0,0,1)";
        // vm.ctx.lineWidth = 1;
        // vm.ctx.stroke();
        vm.ctx.fillStyle = color;
        vm.ctx.fill();
    };
    return Mountain;
}());
var App = (function () {
    function App() {
        //Codepen doesn't like generics :'(
        // this.canvas = <HTMLCanvasElement>document.getElementById('canvas');
        var vm = this;
        vm.canvas = document.getElementById('canvas');
        vm.ctx = vm.canvas.getContext('2d');
        vm.sizeCanvas();
        vm.initEvents();
        window.requestAnimationFrame(function (t) { vm.draw(t); });
        console.log(vm);
        vm.mountain = new Mountain(vm.w, vm.h, vm.h / 8, vm.h / 8 + 50);
        vm.mountain.draw("rgba(0, 255, 0, 1)");
        vm.ctx.drawImage(vm.mountain.canvas, 0, 0, this.w, this.h);
        vm.mountain2 = new Mountain(vm.w, vm.h, 4 * vm.h / 8, 4 * vm.h / 8 + 50);
        vm.mountain2.draw("rgba(255, 0, 0, 1)");
        vm.ctx.drawImage(vm.mountain2.canvas, 0, 0, this.w, this.h);
        vm.mountain3 = new Mountain(vm.w, vm.h, 7 * vm.h / 8, 7 * vm.h / 8 + 50);
        vm.mountain3.draw("rgba(0, 0, 255, 1)");
        vm.ctx.drawImage(vm.mountain3.canvas, 0, 0, this.w, this.h);
    }
    App.prototype.sizeCanvas = function () {
        var vm = this;
        this.w = this.canvas.width = window.innerWidth;
        this.h = this.canvas.height = window.innerHeight;
    };
    App.prototype.draw = function (t) {
        var _this = this;
        var vm = this;
        window.requestAnimationFrame(function (t) { _this.draw(t); });
        vm.ctx.clearRect(0, 0, vm.w, vm.h);
        // vm.mountain.ctx.translate(-1, 0);
        vm.mountain.ctx.clearRect(0, 0, 50000, vm.h);
        vm.mountain.draw("rgba(0, 255, 0, 1)");
        vm.ctx.drawImage(vm.mountain.canvas, 0, 0, this.w, this.h);
        vm.mountain2.ctx.clearRect(0, 0, 50000, vm.h);
        vm.mountain2.draw("rgba(255, 0, 0, 1)");
        // vm.mountain2.ctx.translate(-1, 0);
        vm.ctx.drawImage(vm.mountain2.canvas, 0, 0, this.w, this.h);
        vm.mountain3.ctx.clearRect(0, 0, 50000, vm.h);
        vm.mountain3.draw("rgba(0, 0, 255, 1)");
        // vm.mountain3.ctx.translate(-1, 0);
        vm.ctx.drawImage(vm.mountain3.canvas, 0, 0, this.w, this.h);
    };
    App.prototype.initEvents = function () {
        var _this = this;
        window.onresize = function (e) {
            _this.sizeCanvas();
            _this.ctx.drawImage(_this.mountain.canvas, 0, 0, _this.w, _this.h);
        };
    };
    return App;
}());
var app = new App();
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLGNBQWMsR0FBRyxFQUFFLEdBQUc7SUFDbEIsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUM3RCxDQUFDO0FBRUQ7SUFRSSxnQkFBWSxJQUFZLEVBQUUsSUFBWSxFQUFFLElBQVksRUFBRSxJQUFZLEVBQUUsQ0FBUyxFQUFFLENBQVM7UUFDcEYsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLEVBQUUsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2YsRUFBRSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDZixFQUFFLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNmLEVBQUUsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2YsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDVCxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNiLENBQUM7SUFDTCxhQUFDO0FBQUQsQ0FqQkEsQUFpQkMsSUFBQTtBQUlEO0lBZ0JJLGtCQUFZLENBQVMsRUFBRSxDQUFTLEVBQUUsU0FBaUIsRUFBRSxTQUFpQjtRQUNsRSxJQUFNLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDaEIsRUFBRSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzdDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNwQixFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDckIsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVwQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNULEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1QsRUFBRSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFDekIsRUFBRSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFJekIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUM7UUFHdkIsRUFBRSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7UUFDWixFQUFFLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUViLEVBQUUsQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2YsRUFBRSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUU5QixFQUFFLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEdBQUUsRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDO1FBQ3pDLEVBQUUsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBRWIsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztRQUd2QyxJQUFJLE9BQU8sQ0FBQztRQUNaLElBQUksT0FBTyxDQUFDO1FBRVosSUFBSSxXQUFXLENBQUM7UUFDaEIsSUFBSSxXQUFXLENBQUM7UUFFaEIsSUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDO1FBRWxCLFdBQVcsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLFdBQVcsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRXhDLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUdyRixPQUFPLEtBQUssR0FBRyxJQUFJLEVBQUUsQ0FBQztZQUVsQixPQUFPLEdBQUcsQ0FBQyxHQUFHLEtBQUssR0FBRyxXQUFXLENBQUM7WUFDbEMsT0FBTyxHQUFHLENBQUMsR0FBRyxLQUFLLEdBQUcsV0FBVyxDQUFDO1lBRWxDLEtBQUssSUFBSSxJQUFJLENBQUMsRUFBRSxFQUFDLEVBQUUsQ0FBQyxHQUFDLEVBQUUsQ0FBQztZQUN4QixLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ3pCLE9BQU8sS0FBSyxHQUFHLFNBQVMsSUFBSSxLQUFLLEdBQUcsU0FBUyxFQUFFLENBQUM7Z0JBQzVDLEtBQUssSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDN0IsQ0FBQztZQUlELFdBQVcsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDM0QsV0FBVyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFFbkQsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBSXpGLENBQUM7UUFFRCxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUczQixDQUFDO0lBRUQsMEJBQU8sR0FBUDtRQUNJLElBQU0sRUFBRSxHQUFHLElBQUksQ0FBQztRQUloQixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQzFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM1QyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDaEQsQ0FBQztRQUVELEVBQUUsQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUM7SUFFOUIsQ0FBQztJQUdELHVCQUFJLEdBQUosVUFBSyxLQUFhO1FBQ2QsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBRWhCLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUViLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDbkIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3hDLEVBQUUsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFckksQ0FBQztRQUVELEVBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2RCxFQUFFLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNuQixzQkFBc0I7UUFDdEIsd0NBQXdDO1FBQ3hDLHdCQUF3QjtRQUN4QixtQkFBbUI7UUFFbkIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDbEIsQ0FBQztJQUVMLGVBQUM7QUFBRCxDQTlIQSxBQThIQyxJQUFBO0FBRUQ7SUFXSTtRQUNJLG1DQUFtQztRQUNuQyxzRUFBc0U7UUFDdEUsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBRWhCLEVBQUUsQ0FBQyxNQUFNLEdBQXNCLFFBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDakUsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVwQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDaEIsRUFBRSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2hCLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxVQUFDLENBQUMsSUFBTyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUVoQixFQUFFLENBQUMsUUFBUSxHQUFHLElBQUksUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFDLENBQUMsR0FBQyxFQUFFLENBQUMsQ0FBQztRQUMxRCxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1FBQ3ZDLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFM0QsRUFBRSxDQUFDLFNBQVMsR0FBRyxJQUFJLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxFQUFFLENBQUMsR0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFDLENBQUMsR0FBQyxFQUFFLENBQUMsQ0FBQztRQUMvRCxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1FBQ3hDLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFNUQsRUFBRSxDQUFDLFNBQVMsR0FBRyxJQUFJLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxF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RUFBRSxDQUFDLEVBQUUsS0FBSSxDQUFDLENBQUMsRUFBRSxLQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkUsQ0FBQyxDQUFDO0lBQ04sQ0FBQztJQUVMLFVBQUM7QUFBRCxDQWxGQSxBQWtGQyxJQUFBO0FBRUQsSUFBSSxHQUFHLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJmdW5jdGlvbiByYW5kKG1pbiwgbWF4KTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xyXG59XHJcblxyXG5jbGFzcyBCZXppZXIge1xyXG4gICAgY3AxeDogbnVtYmVyO1xyXG4gICAgY3AxeTogbnVtYmVyO1xyXG4gICAgY3AyeDogbnVtYmVyO1xyXG4gICAgY3AyeTogbnVtYmVyO1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNwMXg6IG51bWJlciwgY3AxeTogbnVtYmVyLCBjcDJ4OiBudW1iZXIsIGNwMnk6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uY3AxeCA9IGNwMXg7XHJcbiAgICAgICAgdm0uY3AxeSA9IGNwMXk7XHJcbiAgICAgICAgdm0uY3AyeCA9IGNwMng7XHJcbiAgICAgICAgdm0uY3AyeSA9IGNwMnk7XHJcbiAgICAgICAgdm0ueCA9IHg7XHJcbiAgICAgICAgdm0ueSA9IHk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuY2xhc3MgTW91bnRhaW4ge1xyXG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgbGVmdDogbnVtYmVyO1xyXG4gICAgcmlnaHQ6IG51bWJlcjtcclxuICAgIGN1cnZlczogQmV6aWVyW107XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgICB3OiBudW1iZXI7XHJcbiAgICBoOiBudW1iZXI7XHJcbiAgICByYW5nZV9taW46IG51bWJlcjtcclxuICAgIHJhbmdlX21heDogbnVtYmVyO1xyXG5cclxuICAgIHlfcG9zOiBudW1iZXI7XHJcbiAgICB4X3BvczogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHc6IG51bWJlciwgaDogbnVtYmVyLCByYW5nZV9taW46IG51bWJlciwgcmFuZ2VfbWF4OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgdm0uY2FudmFzLndpZHRoID0gdztcclxuICAgICAgICB2bS5jYW52YXMuaGVpZ2h0ID0gaDtcclxuICAgICAgICB2bS5jdHggPSB2bS5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICAgICAgdm0udyA9IHc7XHJcbiAgICAgICAgdm0uaCA9IGg7XHJcbiAgICAgICAgdm0ucmFuZ2VfbWluID0gcmFuZ2VfbWluO1xyXG4gICAgICAgIHZtLnJhbmdlX21heCA9IHJhbmdlX21heDtcclxuXHJcblxyXG5cclxuICAgICAgICBjb25zb2xlLmRpcih2bS5jYW52YXMpO1xyXG5cclxuXHJcbiAgICAgICAgdm0ubGVmdCA9IDA7XHJcbiAgICAgICAgdm0ucmlnaHQgPSB3O1xyXG5cclxuICAgICAgICB2bS5jdXJ2ZXMgPSBbXTtcclxuICAgICAgICB2bS5oZWlnaHQgPSBNYXRoLnJvdW5kKGggLyAyKTtcclxuXHJcbiAgICAgICAgdm0ueV9wb3MgPSByYW5kKDAsNCkqIDMyICogTWF0aC5QSSAvIDI1NjtcclxuICAgICAgICB2bS54X3BvcyA9IDA7XHJcblxyXG4gICAgICAgIHZhciBuZXdfeCA9IDA7XHJcbiAgICAgICAgdmFyIG5ld195ID0gcmFuZChyYW5nZV9taW4sIHJhbmdlX21heCk7XHJcblxyXG5cclxuICAgICAgICB2YXIgc2xvcGVfeTtcclxuICAgICAgICB2YXIgc2xvcGVfeDtcclxuXHJcbiAgICAgICAgdmFyIG5ld19zbG9wZV94O1xyXG4gICAgICAgIHZhciBuZXdfc2xvcGVfeTtcclxuXHJcbiAgICAgICAgdmFyIHRlbnNpb24gPSAyNTA7XHJcblxyXG4gICAgICAgIG5ld19zbG9wZV94ID0gbmV3X3ggKyByYW5kKC10ZW5zaW9uLCAwKTtcclxuICAgICAgICBuZXdfc2xvcGVfeSA9IG5ld195ICsgcmFuZCgtdGVuc2lvbiwgMCk7XHJcblxyXG4gICAgICAgIHZtLmN1cnZlcy5wdXNoKG5ldyBCZXppZXIoc2xvcGVfeCwgc2xvcGVfeSwgbmV3X3Nsb3BlX3gsIG5ld19zbG9wZV95LCBuZXdfeCwgbmV3X3kpKTtcclxuXHJcblxyXG4gICAgICAgIHdoaWxlIChuZXdfeCA8IDUwMDApIHtcclxuXHJcbiAgICAgICAgICAgIHNsb3BlX3ggPSAyICogbmV3X3ggLSBuZXdfc2xvcGVfeDtcclxuICAgICAgICAgICAgc2xvcGVfeSA9IDIgKiBuZXdfeSAtIG5ld19zbG9wZV95O1xyXG5cclxuICAgICAgICAgICAgbmV3X3ggKz0gcmFuZCgzNSw0MCkqMTA7XHJcbiAgICAgICAgICAgIG5ld195ICs9IHJhbmQoLTE1MCwgMTUwKTtcclxuICAgICAgICAgICAgd2hpbGUgKG5ld195ID4gcmFuZ2VfbWluICYmIG5ld195ID4gcmFuZ2VfbWF4KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdfeSArPSByYW5kKC0xNTAsIDE1MCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgbmV3X3Nsb3BlX3ggPSBuZXdfeCArIHJhbmQoLXRlbnNpb24gKiAzIC8gNCwgLXRlbnNpb24gLyA4KTtcclxuICAgICAgICAgICAgbmV3X3Nsb3BlX3kgPSBuZXdfeSArIHJhbmQoLXRlbnNpb24sIC10ZW5zaW9uIC8gMik7XHJcblxyXG4gICAgICAgICAgICB2bS5jdXJ2ZXMucHVzaChuZXcgQmV6aWVyKHNsb3BlX3gsIHNsb3BlX3ksIG5ld19zbG9wZV94LCBuZXdfc2xvcGVfeSwgbmV3X3gsIG5ld195KSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyh2bS5jdXJ2ZXMpO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgYW5pbWF0ZSgpIHtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcblxyXG5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5jdXJ2ZXMubGVuZ3RoLTE7IGkrKykge1xyXG4gICAgICAgICAgICB2bS5jdXJ2ZXNbaV0uY3AyeSArPSBNYXRoLnNpbih2bS55X3BvcykgKiA0O1xyXG4gICAgICAgICAgICB2bS5jdXJ2ZXNbaV0uY3AxeSAtPSBNYXRoLnNpbih2bS55X3BvcykgKiA0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm0ueV9wb3MgKz0gTWF0aC5QSSAvIDI1NjtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGRyYXcoY29sb3I6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuXHJcbiAgICAgICAgdm0uYW5pbWF0ZSgpO1xyXG5cclxuICAgICAgICB2bS5jdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgdm0uY3R4Lm1vdmVUbygwLCB2bS5jdXJ2ZXNbMF0ueSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5jdXJ2ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdm0uY3R4LmJlemllckN1cnZlVG8odm0uY3VydmVzW2ldLmNwMXgsIHZtLmN1cnZlc1tpXS5jcDF5LCB2bS5jdXJ2ZXNbaV0uY3AyeCwgdm0uY3VydmVzW2ldLmNwMnksIHZtLmN1cnZlc1tpXS54LCB2bS5jdXJ2ZXNbaV0ueSk7XHJcbiAgICAgICAgICAgIC8vIHZtLmN0eC5saW5lVG8odm0uY3VydmVzW2ldLngsIHZtLmN1cnZlc1tpXS55KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZtLmN0eC5saW5lVG8odm0uY3VydmVzW3ZtLmN1cnZlcy5sZW5ndGggLSAxXS54LCB2bS5oKTtcclxuICAgICAgICB2bS5jdHgubGluZVRvKC01MCwgdm0uaCk7XHJcbiAgICAgICAgdm0uY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIC8vIHZtLmN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAvLyB2bS5jdHguc3Ryb2tlU3R5bGUgPSBcInJnYmEoMCwwLDAsMSlcIjtcclxuICAgICAgICAvLyB2bS5jdHgubGluZVdpZHRoID0gMTtcclxuICAgICAgICAvLyB2bS5jdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgICAgIHZtLmN0eC5maWxsU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICB2bS5jdHguZmlsbCgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuY2xhc3MgQXBwIHtcclxuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIG1vdW50YWluOiBNb3VudGFpbjtcclxuICAgIG1vdW50YWluMjogTW91bnRhaW47XHJcbiAgICBtb3VudGFpbjM6IE1vdW50YWluO1xyXG4gICAgb2Zmc2V0OiBudW1iZXI7XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8vQ29kZXBlbiBkb2Vzbid0IGxpa2UgZ2VuZXJpY3MgOicoXHJcbiAgICAgICAgLy8gdGhpcy5jYW52YXMgPSA8SFRNTENhbnZhc0VsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpO1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuXHJcbiAgICAgICAgdm0uY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcclxuICAgICAgICB2bS5jdHggPSB2bS5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICAgICAgdm0uc2l6ZUNhbnZhcygpO1xyXG4gICAgICAgIHZtLmluaXRFdmVudHMoKTtcclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCh0KSA9PiB7IHZtLmRyYXcodCk7IH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHZtKTtcclxuXHJcbiAgICAgICAgdm0ubW91bnRhaW4gPSBuZXcgTW91bnRhaW4odm0udywgdm0uaCwgdm0uaC84LCB2bS5oLzgrNTApO1xyXG4gICAgICAgIHZtLm1vdW50YWluLmRyYXcoXCJyZ2JhKDAsIDI1NSwgMCwgMSlcIik7XHJcbiAgICAgICAgdm0uY3R4LmRyYXdJbWFnZSh2bS5tb3VudGFpbi5jYW52YXMsIDAsIDAsIHRoaXMudywgdGhpcy5oKTtcclxuXHJcbiAgICAgICAgdm0ubW91bnRhaW4yID0gbmV3IE1vdW50YWluKHZtLncsIHZtLmgsIDQqdm0uaC84LCA0KnZtLmgvOCs1MCk7XHJcbiAgICAgICAgdm0ubW91bnRhaW4yLmRyYXcoXCJyZ2JhKDI1NSwgMCwgMCwgMSlcIik7XHJcbiAgICAgICAgdm0uY3R4LmRyYXdJbWFnZSh2bS5tb3VudGFpbjIuY2FudmFzLCAwLCAwLCB0aGlzLncsIHRoaXMuaCk7XHJcblxyXG4gICAgICAgIHZtLm1vdW50YWluMyA9IG5ldyBNb3VudGFpbih2bS53LCB2bS5oLCA3KnZtLmgvOCwgNyp2bS5oLzgrNTApO1xyXG4gICAgICAgIHZtLm1vdW50YWluMy5kcmF3KFwicmdiYSgwLCAwLCAyNTUsIDEpXCIpO1xyXG4gICAgICAgIHZtLmN0eC5kcmF3SW1hZ2Uodm0ubW91bnRhaW4zLmNhbnZhcywgMCwgMCwgdGhpcy53LCB0aGlzLmgpO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgc2l6ZUNhbnZhcygpIHtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy53ID0gdGhpcy5jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICB0aGlzLmggPSB0aGlzLmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gICAgfVxyXG4gICAgZHJhdyh0OiBhbnkpIHtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgodCkgPT4geyB0aGlzLmRyYXcodCk7IH0pO1xyXG5cclxuICAgICAgICB2bS5jdHguY2xlYXJSZWN0KDAsIDAsIHZtLncsIHZtLmgpO1xyXG5cclxuICAgICAgICAvLyB2bS5tb3VudGFpbi5jdHgudHJhbnNsYXRlKC0xLCAwKTtcclxuICAgICAgICB2bS5tb3VudGFpbi5jdHguY2xlYXJSZWN0KDAsIDAsIDUwMDAwLCB2bS5oKTtcclxuICAgICAgICB2bS5tb3VudGFpbi5kcmF3KFwicmdiYSgwLCAyNTUsIDAsIDEpXCIpO1xyXG4gICAgICAgIHZtLmN0eC5kcmF3SW1hZ2Uodm0ubW91bnRhaW4uY2FudmFzLCAwLCAwLCB0aGlzLncsIHRoaXMuaCk7XHJcblxyXG4gICAgICAgIHZtLm1vdW50YWluMi5jdHguY2xlYXJSZWN0KDAsIDAsIDUwMDAwLCB2bS5oKTtcclxuICAgICAgICB2bS5tb3VudGFpbjIuZHJhdyhcInJnYmEoMjU1LCAwLCAwLCAxKVwiKTtcclxuICAgICAgICAvLyB2bS5tb3VudGFpbjIuY3R4LnRyYW5zbGF0ZSgtMSwgMCk7XHJcbiAgICAgICAgdm0uY3R4LmRyYXdJbWFnZSh2bS5tb3VudGFpbjIuY2FudmFzLCAwLCAwLCB0aGlzLncsIHRoaXMuaCk7XHJcblxyXG4gICAgICAgIHZtLm1vdW50YWluMy5jdHguY2xlYXJSZWN0KDAsIDAsIDUwMDAwLCB2bS5oKTtcclxuICAgICAgICB2bS5tb3VudGFpbjMuZHJhdyhcInJnYmEoMCwgMCwgMjU1LCAxKVwiKTtcclxuICAgICAgICAvLyB2bS5tb3VudGFpbjMuY3R4LnRyYW5zbGF0ZSgtMSwgMCk7XHJcbiAgICAgICAgdm0uY3R4LmRyYXdJbWFnZSh2bS5tb3VudGFpbjMuY2FudmFzLCAwLCAwLCB0aGlzLncsIHRoaXMuaCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBpbml0RXZlbnRzKCkge1xyXG4gICAgICAgIHdpbmRvdy5vbnJlc2l6ZSA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZUNhbnZhcygpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UodGhpcy5tb3VudGFpbi5jYW52YXMsIDAsIDAsIHRoaXMudywgdGhpcy5oKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxudmFyIGFwcCA9IG5ldyBBcHAoKTsiXX0=
