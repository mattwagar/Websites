(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function rand(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}
var Bezier = (function () {
    function Bezier(cp1x, cp1y, cp2x, cp2y, x, y) {
        var vm = this;
        vm.cp1x = cp1x;
        vm.cp1y = cp1y;
        vm.cp2x = cp2x;
        vm.cp2y = cp2y;
        vm.x = x;
        vm.y = y;
    }
    return Bezier;
}());
var Mountain = (function () {
    function Mountain(w, h, range_min, range_max) {
        var vm = this;
        vm.canvas = document.createElement('canvas');
        vm.canvas.width = w;
        vm.canvas.height = h;
        vm.ctx = vm.canvas.getContext('2d');
        vm.w = w;
        vm.h = h;
        vm.range_min = range_min;
        vm.range_max = range_max;
        vm.left = 0;
        vm.right = w;
        vm.curves = [];
        vm.height = Math.round(h / 2);
        vm.y_pos = rand(0, 4) * 32 * Math.PI / 256;
        vm.x_pos = 0;
        vm.translate = 0;
        vm.n_translated = 1;
        vm.generate_bound = 5000;
        var new_x = 0;
        var new_y = rand(vm.range_min, vm.range_max);
        var slope_y;
        var slope_x;
        var new_slope_x;
        var new_slope_y;
        var tension = 250;
        new_slope_x = new_x + rand(-tension, 0);
        new_slope_y = new_y + rand(-tension, 0);
        vm.curves.push(new Bezier(slope_x, slope_y, new_slope_x, new_slope_y, new_x, new_y));
        vm.generate();
        console.log(vm.curves);
    }
    Mountain.prototype.generate = function () {
        var vm = this;
        var new_x = vm.curves[vm.curves.length - 1].x;
        var new_y = vm.curves[vm.curves.length - 1].y;
        var slope_y;
        var slope_x;
        var new_slope_x = vm.curves[vm.curves.length - 1].cp2x;
        var new_slope_y = vm.curves[vm.curves.length - 1].cp2y;
        ;
        var tension = 250;
        while (new_x < vm.generate_bound * vm.n_translated) {
            slope_x = 2 * new_x - new_slope_x;
            slope_y = 2 * new_y - new_slope_y;
            new_x += rand(35, 40) * 10;
            // new_y += rand(-150, 150);
            // while (new_y > vm.range_min && new_y > vm.range_max) {
            //     new_y += rand(-150, 150);
            // }
            new_slope_x = new_x + rand(-tension * 3 / 4, -tension / 8);
            new_slope_y = new_y + rand(-tension, -tension / 2);
            vm.curves.push(new Bezier(slope_x, slope_y, new_slope_x, new_slope_y, new_x, new_y));
        }
    };
    Mountain.prototype.increment = function (increment) {
        this.translate += increment;
    };
    Mountain.prototype.animate = function () {
        var vm = this;
        for (var i = 0; i < vm.curves.length; i++) {
            vm.curves[i].cp2y += Math.sin(vm.y_pos) * vm.h / 500;
            vm.curves[i].cp1y -= Math.sin(vm.y_pos) * vm.h / 500;
        }
        vm.y_pos += Math.PI / 256;
    };
    Mountain.prototype.conditional = function () {
        var vm = this;
        if (vm.translate > vm.generate_bound - vm.w) {
            vm.translate = 0;
            vm.n_translated++;
            console.log(vm.n_translated * vm.generate_bound);
            vm.generate();
            console.log(vm.curves.length);
        }
    };
    Mountain.prototype.draw = function (color) {
        var vm = this;
        vm.conditional();
        vm.animate();
        vm.ctx.beginPath();
        vm.ctx.moveTo(0, vm.curves[0].y);
        for (var i = 0; i < vm.curves.length; i++) {
            vm.ctx.bezierCurveTo(vm.curves[i].cp1x, vm.curves[i].cp1y, vm.curves[i].cp2x, vm.curves[i].cp2y, vm.curves[i].x, vm.curves[i].y);
        }
        vm.ctx.lineTo(vm.curves[vm.curves.length - 1].x, vm.h);
        vm.ctx.lineTo(-50, vm.h);
        vm.ctx.closePath();
        // vm.ctx.strokeStyle = "rgba(0,0,0,1)";
        // vm.ctx.lineWidth = 1;
        // vm.ctx.stroke();
        var grad = vm.ctx.createLinearGradient(0, vm.curves[0].y - 250, 0, vm.h);
        var opac_color = color.replace(', 1)', ', 0.001)');
        grad.addColorStop(0, opac_color);
        grad.addColorStop(1, color);
        vm.ctx.fillStyle = grad;
        vm.ctx.fill();
    };
    return Mountain;
}());
var App = (function () {
    function App() {
        //Codepen doesn't like generics :'(
        // this.canvas = <HTMLCanvasElement>document.getElementById('canvas');
        var vm = this;
        vm.canvas = document.getElementById('canvas');
        vm.ctx = vm.canvas.getContext('2d');
        vm.sizeCanvas();
        vm.initEvents();
        window.requestAnimationFrame(function (t) { vm.draw(t); });
        console.log(vm);
        vm.mountain = new Mountain(vm.w, vm.h, 2 * vm.h / 16, 2 * vm.h / 16 + 25);
        vm.ctx.drawImage(vm.mountain.canvas, 0, 0, this.w, this.h);
        console.log(vm.mountain.ctx);
        vm.mountain2 = new Mountain(vm.w, vm.h, 6 * vm.h / 16, 6 * vm.h / 16 + 25);
        vm.ctx.drawImage(vm.mountain2.canvas, 0, 0, this.w, this.h);
        vm.mountain3 = new Mountain(vm.w, vm.h, 10 * vm.h / 16, 10 * vm.h / 16 + 25);
        vm.ctx.drawImage(vm.mountain3.canvas, 0, 0, this.w, this.h);
        vm.mountain4 = new Mountain(vm.w, vm.h, 14 * vm.h / 16, 14 * vm.h / 16 + 25);
        vm.ctx.drawImage(vm.mountain3.canvas, 0, 0, this.w, this.h);
    }
    App.prototype.sizeCanvas = function () {
        var vm = this;
        this.w = this.canvas.width = window.innerWidth;
        this.h = this.canvas.height = window.innerHeight;
    };
    App.prototype.draw = function (t) {
        var _this = this;
        var vm = this;
        window.requestAnimationFrame(function (t) { _this.draw(t); });
        vm.ctx.clearRect(0, 0, vm.w, vm.h);
        vm.ctx.fillStyle = "rgba(29,98,255, 1)";
        vm.ctx.fill();
        vm.ctx.fillRect(0, 0, vm.w, vm.h);
        vm.mountain.ctx.clearRect(0, 0, 50000, vm.h);
        vm.mountain.draw("rgba(10, 171, 232, 1)");
        vm.mountain.ctx.translate(-1, 0);
        vm.mountain.increment(1);
        vm.ctx.drawImage(vm.mountain.canvas, 0, 0, this.w, this.h);
        vm.mountain2.ctx.clearRect(0, 0, 50000, vm.h);
        vm.mountain2.draw("rgba(2, 255, 216, 1)");
        vm.mountain2.ctx.translate(-0.8, 0);
        vm.mountain2.increment(0.8);
        vm.ctx.drawImage(vm.mountain2.canvas, 0, 0, this.w, this.h);
        vm.mountain3.ctx.clearRect(0, 0, 50000, vm.h);
        vm.mountain3.draw("rgba(2, 255, 111, 1)");
        vm.mountain3.ctx.translate(-1.8, 0);
        vm.mountain3.increment(1.8);
        vm.ctx.drawImage(vm.mountain3.canvas, 0, 0, this.w, this.h);
        vm.mountain4.ctx.clearRect(0, 0, 50000, vm.h);
        vm.mountain4.draw("rgba(27, 255, 11, 1)");
        vm.mountain4.ctx.translate(-1.2, 0);
        vm.mountain4.increment(1.2);
        vm.ctx.drawImage(vm.mountain4.canvas, 0, 0, this.w, this.h);
    };
    App.prototype.initEvents = function () {
        var _this = this;
        window.onresize = function (e) {
            _this.sizeCanvas();
            _this.ctx.drawImage(_this.mountain.canvas, 0, 0, _this.w, _this.h);
        };
    };
    return App;
}());
var app = new App();
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLGNBQWMsR0FBRyxFQUFFLEdBQUc7SUFDbEIsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUM3RCxDQUFDO0FBRUQ7SUFRSSxnQkFBWSxJQUFZLEVBQUUsSUFBWSxFQUFFLElBQVksRUFBRSxJQUFZLEVBQUUsQ0FBUyxFQUFFLENBQVM7UUFDcEYsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLEVBQUUsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2YsRUFBRSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDZixFQUFFLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNmLEVBQUUsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2YsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDVCxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNiLENBQUM7SUFDTCxhQUFDO0FBQUQsQ0FqQkEsQUFpQkMsSUFBQTtBQUlEO0lBb0JJLGtCQUFZLENBQVMsRUFBRSxDQUFTLEVBQUUsU0FBaUIsRUFBRSxTQUFpQjtRQUNsRSxJQUFNLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDaEIsRUFBRSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzdDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNwQixFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDckIsRUFBRSxDQUFDLEdBQUcsR0FB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QUMsQ0FBQTtRQUU1QixFQUFFLENBQUMsU0FBUyxHQUFHLElBQUksUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQzNFLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFNUQsRUFBRSxDQUFDLFNBQVMsR0FBRyxJQUFJLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUM3RSxFQUFFLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTVELEVBQUUsQ0FBQyxTQUFTLEdBQUcsSUFBSSxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDN0UsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUdoRSxDQUFDO0lBRUQsd0JBQVUsR0FBVjtRQUNJLElBQU0sRUFBRSxHQUFHLElBQUksQ0FBQztRQUNoQixJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7UUFDL0MsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDO0lBRXJELENBQUM7SUFDRCxrQkFBSSxHQUFKLFVBQUssQ0FBTTtRQUFYLGlCQXlDQztRQXhDRyxJQUFNLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDaEIsTUFBTSxDQUFDLHFCQUFxQixDQUFDLFVBQUMsQ0FBQyxJQUFPLEtBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV2RCxFQUFFLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRW5DLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFFLG9CQUFvQixDQUFDO1FBQ3ZDLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDZCxFQUFFLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBR2pDLEVBQUUsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0MsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUMxQyxFQUFFLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDakMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUUzRCxFQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlDLEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFDMUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLEVBQUUsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFNUQsRUFBRSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5QyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQzFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNwQyxFQUFFLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUU1QixFQUFFLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTVELEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUMxQyxFQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDcEMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDNUIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQU9oRSxDQUFDO0lBSUQsd0JBQVUsR0FBVjtRQUFBLGlCQUtDO1FBSkcsTUFBTSxDQUFDLFFBQVEsR0FBRyxVQUFDLENBQUM7WUFDaEIsS0FBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2xCLEtBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEtBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSSxDQUFDLENBQUMsRUFBRSxLQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkUsQ0FBQyxDQUFDO0lBQ04sQ0FBQztJQUVMLFVBQUM7QUFBRCxDQW5HQSxBQW1HQyxJQUFBO0FBRUQsSUFBSSxHQUFHLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJmdW5jdGlvbiByYW5kKG1pbiwgbWF4KTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xyXG59XHJcblxyXG5jbGFzcyBCZXppZXIge1xyXG4gICAgY3AxeDogbnVtYmVyO1xyXG4gICAgY3AxeTogbnVtYmVyO1xyXG4gICAgY3AyeDogbnVtYmVyO1xyXG4gICAgY3AyeTogbnVtYmVyO1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNwMXg6IG51bWJlciwgY3AxeTogbnVtYmVyLCBjcDJ4OiBudW1iZXIsIGNwMnk6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uY3AxeCA9IGNwMXg7XHJcbiAgICAgICAgdm0uY3AxeSA9IGNwMXk7XHJcbiAgICAgICAgdm0uY3AyeCA9IGNwMng7XHJcbiAgICAgICAgdm0uY3AyeSA9IGNwMnk7XHJcbiAgICAgICAgdm0ueCA9IHg7XHJcbiAgICAgICAgdm0ueSA9IHk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuY2xhc3MgTW91bnRhaW4ge1xyXG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgbGVmdDogbnVtYmVyO1xyXG4gICAgcmlnaHQ6IG51bWJlcjtcclxuICAgIGN1cnZlczogQmV6aWVyW107XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgICB0cmFuc2xhdGU6IG51bWJlcjtcclxuICAgIG5fdHJhbnNsYXRlZDogbnVtYmVyO1xyXG4gICAgZ2VuZXJhdGVfYm91bmQ6bnVtYmVyO1xyXG5cclxuICAgIHc6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIHJhbmdlX21pbjogbnVtYmVyO1xyXG4gICAgcmFuZ2VfbWF4OiBudW1iZXI7XHJcblxyXG4gICAgeV9wb3M6IG51bWJlcjtcclxuICAgIHhfcG9zOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IodzogbnVtYmVyLCBoOiBudW1iZXIsIHJhbmdlX21pbjogbnVtYmVyLCByYW5nZV9tYXg6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgICAgICB2bS5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICB2bS5jYW52YXMud2lkdGggPSB3O1xyXG4gICAgICAgIHZtLmNhbnZhcy5oZWlnaHQgPSBoO1xyXG4gICAgICAgIHZtLmN0eCA9IHZtLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgICB2bS53ID0gdztcclxuICAgICAgICB2bS5oID0gaDtcclxuICAgICAgICB2bS5yYW5nZV9taW4gPSByYW5nZV9taW47XHJcbiAgICAgICAgdm0ucmFuZ2VfbWF4ID0gcmFuZ2VfbWF4O1xyXG5cclxuICAgICAgICB2bS5sZWZ0ID0gMDtcclxuICAgICAgICB2bS5yaWdodCA9IHc7XHJcblxyXG4gICAgICAgIHZtLmN1cnZlcyA9IFtdO1xyXG4gICAgICAgIHZtLmhlaWdodCA9IE1hdGgucm91bmQoaCAvIDIpO1xyXG5cclxuICAgICAgICB2bS55X3BvcyA9IHJhbmQoMCwgNCkgKiAzMiAqIE1hdGguUEkgLyAyNTY7XHJcbiAgICAgICAgdm0ueF9wb3MgPSAwO1xyXG5cclxuICAgICAgICB2bS50cmFuc2xhdGUgPSAwO1xyXG4gICAgICAgIHZtLm5fdHJhbnNsYXRlZCA9IDE7XHJcbiAgICAgICAgdm0uZ2VuZXJhdGVfYm91bmQgPSA1MDAwO1xyXG5cclxuICAgICAgICB2YXIgbmV3X3ggPSAwO1xyXG4gICAgICAgIHZhciBuZXdfeSA9IHJhbmQodm0ucmFuZ2VfbWluLCB2bS5yYW5nZV9tYXgpO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIHNsb3BlX3k7XHJcbiAgICAgICAgdmFyIHNsb3BlX3g7XHJcblxyXG4gICAgICAgIHZhciBuZXdfc2xvcGVfeDtcclxuICAgICAgICB2YXIgbmV3X3Nsb3BlX3k7XHJcblxyXG4gICAgICAgIHZhciB0ZW5zaW9uID0gMjUwO1xyXG5cclxuICAgICAgICBuZXdfc2xvcGVfeCA9IG5ld194ICsgcmFuZCgtdGVuc2lvbiwgMCk7XHJcbiAgICAgICAgbmV3X3Nsb3BlX3kgPSBuZXdfeSArIHJhbmQoLXRlbnNpb24sIDApO1xyXG5cclxuICAgICAgICB2bS5jdXJ2ZXMucHVzaChuZXcgQmV6aWVyKHNsb3BlX3gsIHNsb3BlX3ksIG5ld19zbG9wZV94LCBuZXdfc2xvcGVfeSwgbmV3X3gsIG5ld195KSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdm0uZ2VuZXJhdGUoKTtcclxuXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKHZtLmN1cnZlcyk7XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZSgpIHtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZhciBuZXdfeCA9IHZtLmN1cnZlc1t2bS5jdXJ2ZXMubGVuZ3RoIC0gMV0ueDtcclxuICAgICAgICB2YXIgbmV3X3kgPSB2bS5jdXJ2ZXNbdm0uY3VydmVzLmxlbmd0aCAtIDFdLnk7XHJcblxyXG5cclxuICAgICAgICB2YXIgc2xvcGVfeTtcclxuICAgICAgICB2YXIgc2xvcGVfeDtcclxuXHJcbiAgICAgICAgdmFyIG5ld19zbG9wZV94ID0gdm0uY3VydmVzW3ZtLmN1cnZlcy5sZW5ndGggLSAxXS5jcDJ4O1xyXG4gICAgICAgIHZhciBuZXdfc2xvcGVfeSA9IHZtLmN1cnZlc1t2bS5jdXJ2ZXMubGVuZ3RoIC0gMV0uY3AyeTs7XHJcblxyXG4gICAgICAgIHZhciB0ZW5zaW9uID0gMjUwO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB3aGlsZSAobmV3X3ggPCB2bS5nZW5lcmF0ZV9ib3VuZCAqIHZtLm5fdHJhbnNsYXRlZCkge1xyXG4gICAgICAgICAgICBzbG9wZV94ID0gMiAqIG5ld194IC0gbmV3X3Nsb3BlX3g7XHJcbiAgICAgICAgICAgIHNsb3BlX3kgPSAyICogbmV3X3kgLSBuZXdfc2xvcGVfeTtcclxuICAgICAgICAgICAgbmV3X3ggKz0gcmFuZCgzNSwgNDApICogMTA7XHJcbiAgICAgICAgICAgIC8vIG5ld195ICs9IHJhbmQoLTE1MCwgMTUwKTtcclxuICAgICAgICAgICAgLy8gd2hpbGUgKG5ld195ID4gdm0ucmFuZ2VfbWluICYmIG5ld195ID4gdm0ucmFuZ2VfbWF4KSB7XHJcbiAgICAgICAgICAgIC8vICAgICBuZXdfeSArPSByYW5kKC0xNTAsIDE1MCk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgbmV3X3Nsb3BlX3ggPSBuZXdfeCArIHJhbmQoLXRlbnNpb24gKiAzIC8gNCwgLXRlbnNpb24gLyA4KTtcclxuICAgICAgICAgICAgbmV3X3Nsb3BlX3kgPSBuZXdfeSArIHJhbmQoLXRlbnNpb24sIC10ZW5zaW9uIC8gMik7XHJcbiAgICAgICAgICAgIHZtLmN1cnZlcy5wdXNoKG5ldyBCZXppZXIoc2xvcGVfeCwgc2xvcGVfeSwgbmV3X3Nsb3BlX3gsIG5ld19zbG9wZV95LCBuZXdfeCwgbmV3X3kpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5jcmVtZW50KGluY3JlbWVudCl7XHJcbiAgICAgICAgdGhpcy50cmFuc2xhdGUgKz0gaW5jcmVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGFuaW1hdGUoKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uY3VydmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZtLmN1cnZlc1tpXS5jcDJ5ICs9IE1hdGguc2luKHZtLnlfcG9zKSAqIHZtLmgvNTAwO1xyXG4gICAgICAgICAgICB2bS5jdXJ2ZXNbaV0uY3AxeSAtPSBNYXRoLnNpbih2bS55X3BvcykgKiB2bS5oLzUwMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdm0ueV9wb3MgKz0gTWF0aC5QSSAvIDI1NjtcclxuICAgIH1cclxuXHJcbiAgICBjb25kaXRpb25hbCgpIHtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICAgICAgaWYodm0udHJhbnNsYXRlID4gdm0uZ2VuZXJhdGVfYm91bmQgLSB2bS53KXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZtLnRyYW5zbGF0ZSA9IDA7XHJcbiAgICAgICAgICAgIHZtLm5fdHJhbnNsYXRlZCsrO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2codm0ubl90cmFuc2xhdGVkKnZtLmdlbmVyYXRlX2JvdW5kKTtcclxuICAgICAgICAgICAgdm0uZ2VuZXJhdGUoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codm0uY3VydmVzLmxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkcmF3KGNvbG9yOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZtLmNvbmRpdGlvbmFsKCk7XHJcbiAgICAgICAgdm0uYW5pbWF0ZSgpO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB2bS5jdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgdm0uY3R4Lm1vdmVUbygwLCB2bS5jdXJ2ZXNbMF0ueSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5jdXJ2ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdm0uY3R4LmJlemllckN1cnZlVG8odm0uY3VydmVzW2ldLmNwMXgsIHZtLmN1cnZlc1tpXS5jcDF5LCB2bS5jdXJ2ZXNbaV0uY3AyeCwgdm0uY3VydmVzW2ldLmNwMnksIHZtLmN1cnZlc1tpXS54LCB2bS5jdXJ2ZXNbaV0ueSk7XHJcbiAgICAgICAgICAgIC8vIHZtLmN0eC5saW5lVG8odm0uY3VydmVzW2ldLngsIHZtLmN1cnZlc1tpXS55KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZtLmN0eC5saW5lVG8odm0uY3VydmVzW3ZtLmN1cnZlcy5sZW5ndGggLSAxXS54LCB2bS5oKTtcclxuICAgICAgICB2bS5jdHgubGluZVRvKC01MCwgdm0uaCk7XHJcbiAgICAgICAgdm0uY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIC8vIHZtLmN0eC5zdHJva2VTdHlsZSA9IFwicmdiYSgwLDAsMCwxKVwiO1xyXG4gICAgICAgIC8vIHZtLmN0eC5saW5lV2lkdGggPSAxO1xyXG4gICAgICAgIC8vIHZtLmN0eC5zdHJva2UoKTtcclxuXHJcbiAgICAgICAgdmFyIGdyYWQgPSB2bS5jdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgdm0uY3VydmVzWzBdLnkgLSAyNTAsIDAsIHZtLmgpO1xyXG4gICAgICAgIHZhciBvcGFjX2NvbG9yID0gY29sb3IucmVwbGFjZSgnLCAxKScsICcsIDAuMDAxKScpO1xyXG5cclxuICAgICAgICBncmFkLmFkZENvbG9yU3RvcCgwLCBvcGFjX2NvbG9yKTtcclxuICAgICAgICBncmFkLmFkZENvbG9yU3RvcCgxLCBjb2xvcik7XHJcblxyXG4gICAgICAgIHZtLmN0eC5maWxsU3R5bGUgPSBncmFkO1xyXG4gICAgICAgIHZtLmN0eC5maWxsKCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBBcHAge1xyXG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgdzogbnVtYmVyO1xyXG4gICAgaDogbnVtYmVyO1xyXG4gICAgbW91bnRhaW46IE1vdW50YWluO1xyXG4gICAgbW91bnRhaW4yOiBNb3VudGFpbjtcclxuICAgIG1vdW50YWluMzogTW91bnRhaW47XHJcbiAgICBtb3VudGFpbjQ6IE1vdW50YWluO1xyXG4gICAgb2Zmc2V0OiBudW1iZXI7XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8vQ29kZXBlbiBkb2Vzbid0IGxpa2UgZ2VuZXJpY3MgOicoXHJcbiAgICAgICAgLy8gdGhpcy5jYW52YXMgPSA8SFRNTENhbnZhc0VsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpO1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuXHJcbiAgICAgICAgdm0uY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcclxuICAgICAgICB2bS5jdHggPSB2bS5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICAgICAgdm0uc2l6ZUNhbnZhcygpO1xyXG4gICAgICAgIHZtLmluaXRFdmVudHMoKTtcclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCh0KSA9PiB7IHZtLmRyYXcodCk7IH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHZtKTtcclxuXHJcbiAgICAgICAgdm0ubW91bnRhaW4gPSBuZXcgTW91bnRhaW4odm0udywgdm0uaCwgMiAqIHZtLmggLyAxNiwgMiAqIHZtLmggLyAxNiArIDI1KTtcclxuICAgICAgICB2bS5jdHguZHJhd0ltYWdlKHZtLm1vdW50YWluLmNhbnZhcywgMCwgMCwgdGhpcy53LCB0aGlzLmgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHZtLm1vdW50YWluLmN0eClcclxuXHJcbiAgICAgICAgdm0ubW91bnRhaW4yID0gbmV3IE1vdW50YWluKHZtLncsIHZtLmgsIDYgKiB2bS5oIC8gMTYsIDYgKiB2bS5oIC8gMTYgKyAyNSk7XHJcbiAgICAgICAgdm0uY3R4LmRyYXdJbWFnZSh2bS5tb3VudGFpbjIuY2FudmFzLCAwLCAwLCB0aGlzLncsIHRoaXMuaCk7XHJcblxyXG4gICAgICAgIHZtLm1vdW50YWluMyA9IG5ldyBNb3VudGFpbih2bS53LCB2bS5oLCAxMCAqIHZtLmggLyAxNiwgMTAgKiB2bS5oIC8gMTYgKyAyNSk7XHJcbiAgICAgICAgdm0uY3R4LmRyYXdJbWFnZSh2bS5tb3VudGFpbjMuY2FudmFzLCAwLCAwLCB0aGlzLncsIHRoaXMuaCk7XHJcblxyXG4gICAgICAgIHZtLm1vdW50YWluNCA9IG5ldyBNb3VudGFpbih2bS53LCB2bS5oLCAxNCAqIHZtLmggLyAxNiwgMTQgKiB2bS5oIC8gMTYgKyAyNSk7XHJcbiAgICAgICAgdm0uY3R4LmRyYXdJbWFnZSh2bS5tb3VudGFpbjMuY2FudmFzLCAwLCAwLCB0aGlzLncsIHRoaXMuaCk7XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBzaXplQ2FudmFzKCkge1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgICAgICB0aGlzLncgPSB0aGlzLmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIHRoaXMuaCA9IHRoaXMuY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHJcbiAgICB9XHJcbiAgICBkcmF3KHQ6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCh0KSA9PiB7IHRoaXMuZHJhdyh0KTsgfSk7XHJcblxyXG4gICAgICAgIHZtLmN0eC5jbGVhclJlY3QoMCwgMCwgdm0udywgdm0uaCk7XHJcblxyXG4gICAgICAgIHZtLmN0eC5maWxsU3R5bGUgPVwicmdiYSgyOSw5OCwyNTUsIDEpXCI7XHJcbiAgICAgICAgdm0uY3R4LmZpbGwoKTtcclxuICAgICAgICB2bS5jdHguZmlsbFJlY3QoMCwwLCB2bS53LCB2bS5oKTtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgdm0ubW91bnRhaW4uY3R4LmNsZWFyUmVjdCgwLCAwLCA1MDAwMCwgdm0uaCk7XHJcbiAgICAgICAgdm0ubW91bnRhaW4uZHJhdyhcInJnYmEoMTAsIDE3MSwgMjMyLCAxKVwiKTtcclxuICAgICAgICB2bS5tb3VudGFpbi5jdHgudHJhbnNsYXRlKC0xLCAwKTtcclxuICAgICAgICB2bS5tb3VudGFpbi5pbmNyZW1lbnQoMSk7XHJcbiAgICAgICAgdm0uY3R4LmRyYXdJbWFnZSh2bS5tb3VudGFpbi5jYW52YXMsIDAsIDAsIHRoaXMudywgdGhpcy5oKTtcclxuXHJcbiAgICAgICAgdm0ubW91bnRhaW4yLmN0eC5jbGVhclJlY3QoMCwgMCwgNTAwMDAsIHZtLmgpO1xyXG4gICAgICAgIHZtLm1vdW50YWluMi5kcmF3KFwicmdiYSgyLCAyNTUsIDIxNiwgMSlcIik7XHJcbiAgICAgICAgdm0ubW91bnRhaW4yLmN0eC50cmFuc2xhdGUoLTAuOCwgMCk7XHJcbiAgICAgICAgdm0ubW91bnRhaW4yLmluY3JlbWVudCgwLjgpO1xyXG4gICAgICAgIHZtLmN0eC5kcmF3SW1hZ2Uodm0ubW91bnRhaW4yLmNhbnZhcywgMCwgMCwgdGhpcy53LCB0aGlzLmgpO1xyXG5cclxuICAgICAgICB2bS5tb3VudGFpbjMuY3R4LmNsZWFyUmVjdCgwLCAwLCA1MDAwMCwgdm0uaCk7XHJcbiAgICAgICAgdm0ubW91bnRhaW4zLmRyYXcoXCJyZ2JhKDIsIDI1NSwgMTExLCAxKVwiKTtcclxuICAgICAgICB2bS5tb3VudGFpbjMuY3R4LnRyYW5zbGF0ZSgtMS44LCAwKTtcclxuICAgICAgICB2bS5tb3VudGFpbjMuaW5jcmVtZW50KDEuOCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdm0uY3R4LmRyYXdJbWFnZSh2bS5tb3VudGFpbjMuY2FudmFzLCAwLCAwLCB0aGlzLncsIHRoaXMuaCk7XHJcblxyXG4gICAgICAgIHZtLm1vdW50YWluNC5jdHguY2xlYXJSZWN0KDAsIDAsIDUwMDAwLCB2bS5oKTtcclxuICAgICAgICB2bS5tb3VudGFpbjQuZHJhdyhcInJnYmEoMjcsIDI1NSwgMTEsIDEpXCIpO1xyXG4gICAgICAgIHZtLm1vdW50YWluNC5jdHgudHJhbnNsYXRlKC0xLjIsIDApO1xyXG4gICAgICAgIHZtLm1vdW50YWluNC5pbmNyZW1lbnQoMS4yKTtcclxuICAgICAgICB2bS5jdHguZHJhd0ltYWdlKHZtLm1vdW50YWluNC5jYW52YXMsIDAsIDAsIHRoaXMudywgdGhpcy5oKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGluaXRFdmVudHMoKSB7XHJcbiAgICAgICAgd2luZG93Lm9ucmVzaXplID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zaXplQ2FudmFzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZSh0aGlzLm1vdW50YWluLmNhbnZhcywgMCwgMCwgdGhpcy53LCB0aGlzLmgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG52YXIgYXBwID0gbmV3IEFwcCgpOyJdfQ==
