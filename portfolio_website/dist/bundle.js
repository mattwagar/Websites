(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function rand(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}
var Bezier = (function () {
    function Bezier(cp1x, cp1y, cp2x, cp2y, x, y) {
        var vm = this;
        vm.cp1x = cp1x;
        vm.cp1y = cp1y;
        vm.cp2x = cp2x;
        vm.cp2y = cp2y;
        vm.x = x;
        vm.y = y;
    }
    return Bezier;
}());
var Mountain = (function () {
    function Mountain(w, h) {
        var vm = this;
        vm.canvas = document.createElement('canvas');
        vm.canvas.width = w;
        vm.canvas.height = h;
        vm.ctx = vm.canvas.getContext('2d');
        vm.w = w;
        vm.h = h;
        console.dir(vm.canvas);
        vm.left = 0;
        vm.right = w;
        vm.curves = [];
        vm.height = Math.round(h / 2);
        var new_x = 0;
        var new_y = rand(vm.height - 3, vm.height + 3);
        ;
        var slope_y;
        var slope_x;
        var new_slope_x;
        var new_slope_y;
        var tension = 400;
        new_slope_x = new_x + rand(-tension, 0);
        new_slope_y = new_y + rand(-tension, 0);
        vm.curves.push(new Bezier(slope_x, slope_y, new_slope_x, new_slope_y, new_x, new_y));
        while (new_x < 5000) {
            slope_x = 2 * new_x - new_slope_x;
            slope_y = 2 * new_y - new_slope_y;
            new_x += 400;
            new_y += rand(-150, 150);
            new_slope_x = new_x + rand(-tension * 3 / 4, -tension / 8);
            new_slope_y = new_y + rand(-tension, -tension / 2);
            vm.curves.push(new Bezier(slope_x, slope_y, new_slope_x, new_slope_y, new_x, new_y));
        }
        console.log(vm.curves);
    }
    Mountain.prototype.draw = function () {
        var vm = this;
        vm.ctx.beginPath();
        vm.ctx.moveTo(0, vm.height);
        for (var i = 0; i < vm.curves.length; i++) {
            vm.ctx.bezierCurveTo(vm.curves[i].cp1x, vm.curves[i].cp1y, vm.curves[i].cp2x, vm.curves[i].cp2y, vm.curves[i].x, vm.curves[i].y);
        }
        vm.ctx.lineTo(vm.curves[vm.curves.length - 1].x, vm.h);
        vm.ctx.lineTo(-50, vm.h);
        vm.ctx.closePath();
        // vm.ctx.closePath();
        vm.ctx.strokeStyle = "rgba(0,0,0,1)";
        vm.ctx.lineWidth = 1;
        vm.ctx.stroke();
        vm.ctx.fillStyle = "rgba(0,0,0,1)";
        vm.ctx.fill();
    };
    return Mountain;
}());
var App = (function () {
    function App() {
        //Codepen doesn't like generics :'(
        // this.canvas = <HTMLCanvasElement>document.getElementById('canvas');
        var vm = this;
        vm.canvas = document.getElementById('canvas');
        vm.ctx = vm.canvas.getContext('2d');
        vm.sizeCanvas();
        vm.initEvents();
        window.requestAnimationFrame(function (t) { vm.draw(t); });
        console.log(vm);
        vm.mountain = new Mountain(vm.w, vm.h);
        vm.mountain.draw();
        vm.offset = 0;
        vm.ctx.drawImage(vm.mountain.canvas, 0, 0, this.w, this.h);
    }
    App.prototype.sizeCanvas = function () {
        var vm = this;
        this.w = this.canvas.width = window.innerWidth;
        this.h = this.canvas.height = window.innerHeight;
    };
    App.prototype.draw = function (t) {
        var _this = this;
        var vm = this;
        window.requestAnimationFrame(function (t) { _this.draw(t); });
        vm.ctx.clearRect(0, 0, vm.w, vm.h);
        vm.offset += 1;
        vm.mountain.ctx.clearRect(0, 0, 50000, vm.h);
        vm.mountain.draw();
        vm.mountain.ctx.translate(-5, 0);
        vm.ctx.drawImage(vm.mountain.canvas, 0, 0, this.w, this.h);
    };
    App.prototype.initEvents = function () {
        var _this = this;
        window.onresize = function (e) {
            _this.sizeCanvas();
            _this.ctx.drawImage(_this.mountain.canvas, 0, 0, _this.w, _this.h);
        };
    };
    return App;
}());
var app = new App();
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLGNBQWMsR0FBRyxFQUFFLEdBQUc7SUFDbEIsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUM3RCxDQUFDO0FBRUQ7SUFRSSxnQkFBWSxJQUFZLEVBQUUsSUFBWSxFQUFFLElBQVksRUFBRSxJQUFZLEVBQUUsQ0FBUyxFQUFFLENBQVM7UUFDcEYsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLEVBQUUsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2YsRUFBRSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDZixFQUFFLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNmLEVBQUUsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2YsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDVCxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNiLENBQUM7SUFDTCxhQUFDO0FBQUQsQ0FqQkEsQUFpQkMsSUFBQTtBQUlEO0lBV0ksa0JBQVksQ0FBUyxFQUFFLENBQVM7UUFDNUIsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLEVBQUUsQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM3QyxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDcEIsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxV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O1FBRXZELEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFHakMsRUFBRSxDQUFDLE1BQU0sSUFBRSxDQUFDLENBQUM7UUFDYixFQUFFLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNDLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDbkIsRUFBRSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFPL0QsQ0FBQztJQUlELHdCQUFVLEdBQVY7UUFBQSxpQkFLQztRQUpHLE1BQU0sQ0FBQyxRQUFRLEdBQUcsVUFBQyxDQUFDO1lBQ2hCLEtBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNsQixLQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUksQ0FBQyxDQUFDLEVBQUUsS0FBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25FLENBQUMsQ0FBQztJQUNOLENBQUM7SUFFTCxVQUFDO0FBQUQsQ0FwRUEsQUFvRUMsSUFBQTtBQUVELElBQUksR0FBRyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZnVuY3Rpb24gcmFuZChtaW4sIG1heCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxufVxyXG5cclxuY2xhc3MgQmV6aWVyIHtcclxuICAgIGNwMXg6IG51bWJlcjtcclxuICAgIGNwMXk6IG51bWJlcjtcclxuICAgIGNwMng6IG51bWJlcjtcclxuICAgIGNwMnk6IG51bWJlcjtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjcDF4OiBudW1iZXIsIGNwMXk6IG51bWJlciwgY3AyeDogbnVtYmVyLCBjcDJ5OiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLmNwMXggPSBjcDF4O1xyXG4gICAgICAgIHZtLmNwMXkgPSBjcDF5O1xyXG4gICAgICAgIHZtLmNwMnggPSBjcDJ4O1xyXG4gICAgICAgIHZtLmNwMnkgPSBjcDJ5O1xyXG4gICAgICAgIHZtLnggPSB4O1xyXG4gICAgICAgIHZtLnkgPSB5O1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbmNsYXNzIE1vdW50YWluIHtcclxuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIGxlZnQ6IG51bWJlcjtcclxuICAgIHJpZ2h0OiBudW1iZXI7XHJcbiAgICBjdXJ2ZXM6IEJlemllcltdO1xyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgdzogbnVtYmVyO1xyXG4gICAgaDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHc6IG51bWJlciwgaDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgIHZtLmNhbnZhcy53aWR0aCA9IHc7XHJcbiAgICAgICAgdm0uY2FudmFzLmhlaWdodCA9IGg7XHJcbiAgICAgICAgdm0uY3R4ID0gdm0uY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgICAgIHZtLncgPSB3O1xyXG4gICAgICAgIHZtLmggPSBoO1xyXG5cclxuXHJcblxyXG4gICAgICAgIGNvbnNvbGUuZGlyKHZtLmNhbnZhcyk7XHJcblxyXG5cclxuICAgICAgICB2bS5sZWZ0ID0gMDtcclxuICAgICAgICB2bS5yaWdodCA9IHc7XHJcblxyXG4gICAgICAgIHZtLmN1cnZlcyA9IFtdO1xyXG4gICAgICAgIHZtLmhlaWdodCA9IE1hdGgucm91bmQoaCAvIDIpO1xyXG5cclxuICAgICAgICB2YXIgbmV3X3ggPSAwO1xyXG4gICAgICAgIHZhciBuZXdfeSA9IHJhbmQodm0uaGVpZ2h0IC0gMywgdm0uaGVpZ2h0ICsgMyk7O1xyXG5cclxuXHJcbiAgICAgICAgdmFyIHNsb3BlX3k7XHJcbiAgICAgICAgdmFyIHNsb3BlX3g7XHJcblxyXG4gICAgICAgIHZhciBuZXdfc2xvcGVfeDtcclxuICAgICAgICB2YXIgbmV3X3Nsb3BlX3k7XHJcblxyXG4gICAgICAgIHZhciB0ZW5zaW9uID0gNDAwO1xyXG5cclxuICAgICAgICBuZXdfc2xvcGVfeCA9IG5ld194ICsgcmFuZCgtdGVuc2lvbiwgMCk7XHJcbiAgICAgICAgbmV3X3Nsb3BlX3kgPSBuZXdfeSArIHJhbmQoLXRlbnNpb24sIDApO1xyXG5cclxuICAgICAgICB2bS5jdXJ2ZXMucHVzaChuZXcgQmV6aWVyKHNsb3BlX3gsIHNsb3BlX3ksIG5ld19zbG9wZV94LCBuZXdfc2xvcGVfeSwgbmV3X3gsIG5ld195KSk7XHJcblxyXG5cclxuICAgICAgICB3aGlsZSAobmV3X3ggPCA1MDAwKSB7XHJcblxyXG4gICAgICAgICAgICBzbG9wZV94ID0gMiAqIG5ld194IC0gbmV3X3Nsb3BlX3g7XHJcbiAgICAgICAgICAgIHNsb3BlX3kgPSAyICogbmV3X3kgLSBuZXdfc2xvcGVfeTtcclxuXHJcbiAgICAgICAgICAgIG5ld194ICs9IDQwMDtcclxuICAgICAgICAgICAgbmV3X3kgKz0gcmFuZCgtMTUwLCAxNTApO1xyXG5cclxuICAgICAgICAgICAgbmV3X3Nsb3BlX3ggPSBuZXdfeCArIHJhbmQoLXRlbnNpb24gKiAzIC8gNCwgLXRlbnNpb24gLyA4KTtcclxuICAgICAgICAgICAgbmV3X3Nsb3BlX3kgPSBuZXdfeSArIHJhbmQoLXRlbnNpb24sIC10ZW5zaW9uIC8gMik7XHJcblxyXG4gICAgICAgICAgICB2bS5jdXJ2ZXMucHVzaChuZXcgQmV6aWVyKHNsb3BlX3gsIHNsb3BlX3ksIG5ld19zbG9wZV94LCBuZXdfc2xvcGVfeSwgbmV3X3gsIG5ld195KSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyh2bS5jdXJ2ZXMpO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGRyYXcoKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLmN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICB2bS5jdHgubW92ZVRvKDAsIHZtLmhlaWdodCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5jdXJ2ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdm0uY3R4LmJlemllckN1cnZlVG8odm0uY3VydmVzW2ldLmNwMXgsIHZtLmN1cnZlc1tpXS5jcDF5LCB2bS5jdXJ2ZXNbaV0uY3AyeCwgdm0uY3VydmVzW2ldLmNwMnksIHZtLmN1cnZlc1tpXS54LCB2bS5jdXJ2ZXNbaV0ueSk7XHJcbiAgICAgICAgICAgIC8vIHZtLmN0eC5saW5lVG8odm0uY3VydmVzW2ldLngsIHZtLmN1cnZlc1tpXS55KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZtLmN0eC5saW5lVG8odm0uY3VydmVzW3ZtLmN1cnZlcy5sZW5ndGggLSAxXS54LCB2bS5oKTtcclxuICAgICAgICB2bS5jdHgubGluZVRvKC01MCwgdm0uaCk7XHJcbiAgICAgICAgdm0uY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIC8vIHZtLmN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICB2bS5jdHguc3Ryb2tlU3R5bGUgPSBcInJnYmEoMCwwLDAsMSlcIjtcclxuICAgICAgICB2bS5jdHgubGluZVdpZHRoID0gMTtcclxuICAgICAgICB2bS5jdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgICAgIHZtLmN0eC5maWxsU3R5bGUgPSBcInJnYmEoMCwwLDAsMSlcIjtcclxuICAgICAgICB2bS5jdHguZmlsbCgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuY2xhc3MgQXBwIHtcclxuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIG1vdW50YWluOiBNb3VudGFpbjtcclxuICAgIG9mZnNldDogbnVtYmVyO1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvL0NvZGVwZW4gZG9lc24ndCBsaWtlIGdlbmVyaWNzIDonKFxyXG4gICAgICAgIC8vIHRoaXMuY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZtLmNhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJyk7XHJcbiAgICAgICAgdm0uY3R4ID0gdm0uY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgICAgIHZtLnNpemVDYW52YXMoKTtcclxuICAgICAgICB2bS5pbml0RXZlbnRzKCk7XHJcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgodCkgPT4geyB2bS5kcmF3KHQpOyB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZyh2bSk7XHJcblxyXG4gICAgICAgIHZtLm1vdW50YWluID0gbmV3IE1vdW50YWluKHZtLncsIHZtLmgpO1xyXG5cclxuICAgICAgICB2bS5tb3VudGFpbi5kcmF3KCk7XHJcblxyXG4gICAgICAgIHZtLm9mZnNldCA9IDA7XHJcblxyXG4gICAgICAgIHZtLmN0eC5kcmF3SW1hZ2Uodm0ubW91bnRhaW4uY2FudmFzLCAwLCAwLCB0aGlzLncsIHRoaXMuaCk7XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBzaXplQ2FudmFzKCkge1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgICAgICB0aGlzLncgPSB0aGlzLmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIHRoaXMuaCA9IHRoaXMuY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHJcbiAgICB9XHJcbiAgICBkcmF3KHQ6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCh0KSA9PiB7IHRoaXMuZHJhdyh0KTsgfSk7XHJcblxyXG4gICAgICAgIHZtLmN0eC5jbGVhclJlY3QoMCwwLHZtLncsIHZtLmgpO1xyXG5cclxuICAgICAgICBcclxuICAgICAgICB2bS5vZmZzZXQrPTE7XHJcbiAgICAgICAgdm0ubW91bnRhaW4uY3R4LmNsZWFyUmVjdCgwLDAsNTAwMDAsIHZtLmgpO1xyXG4gICAgICAgIHZtLm1vdW50YWluLmRyYXcoKTtcclxuICAgICAgICB2bS5tb3VudGFpbi5jdHgudHJhbnNsYXRlKC01LCAwKTtcclxuICAgICAgICB2bS5jdHguZHJhd0ltYWdlKHZtLm1vdW50YWluLmNhbnZhcywgMCwgMCwgdGhpcy53LCB0aGlzLmgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBcclxuXHJcblxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgaW5pdEV2ZW50cygpIHtcclxuICAgICAgICB3aW5kb3cub25yZXNpemUgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNpemVDYW52YXMoKTtcclxuICAgICAgICAgICAgdGhpcy5jdHguZHJhd0ltYWdlKHRoaXMubW91bnRhaW4uY2FudmFzLCAwLCAwLCB0aGlzLncsIHRoaXMuaCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbnZhciBhcHAgPSBuZXcgQXBwKCk7Il19
