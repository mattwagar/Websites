(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/*
app: main cavans
layers) (top to bottom)
menu
circles(position)
*/
function hslToRgb(h, s, l) {
    var r, g, b;
    if (s == 0) {
        r = g = b = l; // achromatic
    }
    else {
        var hue2rgb = function hue2rgb(p, q, t) {
            if (t < 0)
                t += 1;
            if (t > 1)
                t -= 1;
            if (t < 1 / 6)
                return p + (q - p) * 6 * t;
            if (t < 1 / 2)
                return q;
            if (t < 2 / 3)
                return p + (q - p) * (2 / 3 - t) * 6;
            return p;
        };
        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        var p = 2 * l - q;
        r = hue2rgb(p, q, h + 1 / 3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1 / 3);
    }
    return "rgb(" + Math.round(r * 255) + "," + Math.round(g * 255) + "," + Math.round(b * 255) + ")";
}
var Score = (function () {
    function Score(ctx, w, h) {
        var vm = this;
        vm.ctx = ctx;
        vm.score = 0;
        vm.w = w;
        vm.h = h;
    }
    Score.prototype.draw = function () {
        var vm = this;
        vm.ctx.fillStyle = 'black';
        vm.ctx.font = '200px Verdana';
        vm.ctx.textAlign = "center";
        vm.ctx.fillText(vm.score.toString(), vm.w / 2, vm.h / 5);
    };
    Score.prototype.add = function (x) {
        var vm = this;
        vm.score += x;
    };
    return Score;
}());
var Circle = (function () {
    function Circle(ctx, x, y, w, h, r, hsl) {
        var vm = this;
        vm.w = w;
        vm.h = h;
        vm.x = x;
        vm.y = y;
        vm.r = r;
        vm.hsl = hsl;
        vm.color = hslToRgb(vm.hsl[0], vm.hsl[1], vm.hsl[2]);
        // vm.canvas = document.createElement('canvas');
        // vm.ctx = vm.canvas.getContext('2d');
        vm.ctx = ctx;
        vm.sizeCanvas();
        vm.xmin = vm.x - vm.r;
        vm.xmax = vm.x + vm.r;
        vm.ymin = vm.y - vm.r;
        vm.ymax = vm.y + vm.r;
    }
    Circle.prototype.sizeCanvas = function () {
        var vm = this;
        vm.w = vm.ctx.canvas.width = window.innerWidth;
        vm.h = vm.ctx.canvas.height = window.innerHeight;
    };
    Circle.prototype.drawCircle = function () {
        var vm = this;
        // vm.ctx.clearRect(0,0,vm.w,vm.h);
        vm.ctx.beginPath();
        vm.ctx.arc(vm.x, vm.y, vm.r, 0, Math.PI * 2);
        vm.ctx.fillStyle = vm.color;
        vm.ctx.fill();
        vm.ctx.closePath();
    };
    return Circle;
}());
var App = (function () {
    function App() {
        var vm = this;
        //Codepen doesn't like casting :'(
        // this.canvas = document.getElementById('canvas');
        vm.canvas = document.getElementById('canvas');
        vm.ctx = vm.canvas.getContext('2d');
        vm.sizeCanvas();
        // vm.initEvents();
        window.requestAnimationFrame(function (t) { vm.draw(t); });
        var temp = vm.rnghsl(0.8);
        vm.backgroundC = hslToRgb(temp[0], temp[1], temp[2]);
        vm.circles = [];
        vm.circles[0] = new Circle(vm.ctx, 3 * vm.w / 12, 5 * vm.h / 11, vm.w, vm.h, vm.w / 5, vm.rnghsl(0.5));
        vm.circles[1] = new Circle(vm.ctx, 9 * vm.w / 12, 5 * vm.h / 11, vm.w, vm.h, vm.w / 5, vm.rnghsl(0.5));
        vm.circles[2] = new Circle(vm.ctx, 3 * vm.w / 12, 8 * vm.h / 11, vm.w, vm.h, vm.w / 5, vm.rnghsl(0.5));
        vm.circles[3] = new Circle(vm.ctx, 9 * vm.w / 12, 8 * vm.h / 11, vm.w, vm.h, vm.w / 5, vm.rnghsl(0.5));
        vm.backCircle = new Circle(vm.ctx, 0, 0, 0, 0, 0, [1, 1, 1]);
        vm.changing = false;
        vm.color_change = false;
        vm.score = new Score(vm.ctx, vm.w, vm.h);
        vm.order = [];
        vm.calculateContrastOrder();
        console.log(vm.order);
        // vm.circle.drawCircle();
        // vm.ctx.drawImage(vm.circle.canvas, 0, 0);
        vm.canvas.addEventListener('click', function (event) {
            for (var i = 0; i < vm.circles.length; i++) {
                if (vm.changing === false && (event.clientX > vm.circles[i].xmin && event.clientX < vm.circles[i].xmax) && (event.clientY > vm.circles[i].ymin && event.clientY < vm.circles[i].ymax)) {
                    //1. widen circle (duplicate it) to screen size, and increase lightness lerp?
                    //2. set backgroundC to new color
                    //3. reset colors 
                    //4. transition colors in (small to big)\
                    // // converts hue to [0,360]
                    // var x = Math.ceil(vm.backCircle.hsl[0] * 360);
                    // var y = Math.ceil(vm.circles[i].hsl[0] * 360);
                    // // calculates clicked color and background color's difference in hue. returns a number [0, 180]
                    // if (Math.abs(x - y) < Math.abs((360 + y) - x) && Math.abs(x - y) < Math.abs(y - (360 + x))) {
                    //     vm.score.add(Math.abs(x - y))
                    // } else if (Math.abs((360 + y) - x) < Math.abs(y - (360 + x))) {
                    //     vm.score.add(Math.abs((360 + y) - x));
                    // } else {
                    //     vm.score.add(Math.abs(y - (360 + x)));
                    // }
                    for (var j = 0; j < vm.order.length; j++) {
                        if (i === vm.order[j].id) {
                            vm.score.add((j + 1) * 100);
                        }
                    }
                    vm.backCircle.drawCircle();
                    vm.drawCircles();
                    // if x-y is smaller use it// else if y-x is smaller use it
                    // vm.score.add();
                    /* 0-360 - 0-360 */
                    vm.backCircle.x = vm.circles[i].x;
                    vm.backCircle.y = vm.circles[i].y;
                    vm.backCircle.w = vm.circles[i].w;
                    vm.backCircle.h = vm.circles[i].h;
                    vm.backCircle.r = vm.circles[i].r;
                    vm.backCircle.hsl = vm.circles[i].hsl;
                    vm.backCircle.color = vm.circles[i].color;
                    vm.changing = true;
                    vm.color_change = true;
                }
            }
        });
    }
    App.prototype.initEvents = function () {
        var _this = this;
        window.onresize = function (e) { _this.sizeCanvas(); };
    };
    App.prototype.sizeCanvas = function () {
        var vm = this;
        vm.w = vm.ctx.canvas.width = window.innerWidth;
        vm.h = vm.ctx.canvas.height = window.innerHeight;
    };
    App.prototype.calculateOneScore = function (circle) {
        // converts hue to [0,360]
        var vm = this;
        var x = Math.ceil(vm.backCircle.hsl[0] * 360);
        var y = Math.ceil(circle.hsl[0] * 360);
        // calculates clicked color and background color's difference in hue. returns a number [0, 180]
        if (Math.abs(x - y) < Math.abs((360 + y) - x) && Math.abs(x - y) < Math.abs(y - (360 + x))) {
            return (Math.abs(x - y));
        }
        else if (Math.abs((360 + y) - x) < Math.abs(y - (360 + x))) {
            return (Math.abs((360 + y) - x));
        }
        else {
            return (Math.abs(y - (360 + x)));
        }
    };
    App.prototype.calculateContrastOrder = function () {
        var vm = this;
        //loop through circles
        ///calcscores
        ///put in object with score and id greatest to least
        vm.order = [];
        for (var i = 0; i < vm.circles.length; i++) {
            var x = vm.calculateOneScore(vm.circles[i]);
            var l = vm.order.length;
            if (l === 0) {
                vm.order.push({ "id": i, "score": x });
            }
            else if (l > 0) {
                for (var j = 0; j < l; j++) {
                    if (vm.order[j].score > x) {
                        vm.order.splice(j, 0, ({ "id": i, "score": x }));
                        break;
                    }
                    else if (vm.order[j].score <= x && j === (l - 1)) {
                        vm.order.push({ "id": i, "score": x });
                        break;
                    }
                }
            }
        }
    };
    App.prototype.changeBackColor = function (color) {
        var vm = this;
        vm.backgroundC = color;
    };
    App.prototype.rnghsl = function (l) {
        var vm = this;
        var h = (Math.random() * 360) / 360;
        var s = 1.0;
        return [h, s, l];
    };
    App.prototype.resetColors = function () {
        var vm = this;
        for (var i = 0; i < vm.circles.length; i++) {
            vm.circles[i].r = 5;
            vm.circles[i].hsl = vm.rnghsl(0.5);
            vm.circles[i].color = hslToRgb(vm.circles[i].hsl[0], vm.circles[i].hsl[1], vm.circles[i].hsl[2]);
        }
        vm.calculateContrastOrder();
        console.log(vm.order);
    };
    App.prototype.drawCircles = function () {
        var vm = this;
        for (var i = 0; i < vm.circles.length; i++) {
            if (vm.color_change) {
                vm.resetColors();
                vm.color_change = false;
            }
            if (vm.circles[i].r < (vm.w / 5)) {
                var t = (vm.circles[i].r / (vm.w / 5)) * 0.45; /*ratio of radius to size [0-1]*/
                vm.circles[i].r = Math.ceil(vm.circles[i].r * (1.45 - t));
            }
            vm.circles[i].drawCircle();
        }
    };
    App.prototype.draw = function (t) {
        var _this = this;
        var vm = this;
        window.requestAnimationFrame(function (t) { _this.draw(t); });
        if (vm.changing && vm.backCircle.r > vm.h) {
            vm.changing = false;
        }
        else if (vm.changing && vm.backCircle.r > vm.h / 2) {
            vm.backCircle.drawCircle();
            vm.backCircle.r = Math.ceil(vm.backCircle.r * 1.1);
            // vm.resetColors();
            vm.drawCircles();
        }
        else if (vm.changing) {
            // vm.drawCircles();
            vm.backCircle.drawCircle();
            vm.backCircle.r = Math.ceil(vm.backCircle.r * 1.1);
        }
        else {
            vm.backCircle.drawCircle();
            vm.drawCircles();
        }
        vm.score.draw();
    };
    return App;
}());
var app = new App();
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOzs7OztFQUtFO0FBQ0Ysa0JBQWtCLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztJQUNyQixJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBRVosRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDVCxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxhQUFhO0lBQ2hDLENBQUM7SUFBQyxJQUFJLENBQUMsQ0FBQztRQUNKLElBQUksT0FBTyxHQUFHLGlCQUFpQixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDbEMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2xCLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQixFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDMUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUN4QixFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFD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QUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2RyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZHLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUV2RyxFQUFFLENBQUMsVUFBVSxHQUFHLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3RCxFQUFFLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUNwQixFQUFFLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUV4QixFQUFFLENBQUMsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekMsRUFBRSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7UUFFZCxFQUFFLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztRQUM1QixPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUV0QiwwQkFBMEI7UUFDMUIsNENBQTRDO1FBRTVDLEVBQUUsQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFVBQVMsS0FBSztZQUM5QyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQ3pDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEtBQUssS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxLQUFLLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLEtBQUssQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3BMLDZFQUE2RTtvQkFDN0UsaUNBQWlDO29CQUNqQyxrQkFBa0I7b0JBQ2xCLHlDQUF5QztvQkFFekMsNkJBQTZCO29CQUM3QixpREFBaUQ7b0JBQ2pELGlEQUFpRDtvQkFDakQsa0dBQWtHO29CQUNsRyxnR0FBZ0c7b0JBQ2hHLG9DQUFvQztvQkFDcEMsa0VBQWtFO29CQUNsRSw2Q0FBNkM7b0JBQzdDLFdBQVc7b0JBQ1gsNkNBQTZDO29CQUM3QyxJQUFJO29CQUVKLEdBQUcsQ0FBQSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUMsQ0FBQzt3QkFDdkMsRUFBRSxDQUFBLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUEsQ0FBQzs0QkFDdkIsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7d0JBQzVCLENBQUM7b0JBQ0gsQ0FBQztvQkFNRCxFQUFFLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFDO29CQUMzQixFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7b0JBR2pCLDJEQUEyRDtvQkFFM0Qsa0JBQWtCO29CQUVsQixtQkFBbUI7b0JBRW5CLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNsQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDbEMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ2xDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNsQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDbEMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7b0JBQ3RDLEVBQUUsQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO29CQUMxQyxFQUFFLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztvQkFDbkIsRUFBRSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7Z0JBRzNCLENBQUM7WUFDTCxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUE7SUFFTixDQUFDO0lBQ0Qsd0JBQVUsR0FBVjtRQUFBLGlCQUVDO1FBREcsTUFBTSxDQUFDLFFBQVEsR0FBRyxVQUFDLENBQUMsSUFBTyxLQUFJLENBQUMsVUFBVSxFQUFFLENBQUEsQ0FBQyxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUNELHdCQUFVLEdBQVY7UUFDSSxJQUFNLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDaEIsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQztRQUMvQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDO0lBQ3JELENBQUM7SUFDRCwrQkFBaUIsR0FBakIsVUFBa0IsTUFBTTtRQUNwQiwwQkFBMEI7UUFDMUIsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDOUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZDLCtGQUErRjtRQUMvRixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3pGLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDNUIsQ0FBQztRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNELE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyQyxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDSixNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckMsQ0FBQztJQUNM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Q0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNuQixvQkFBb0I7WUFDcEIsRUFBRSxDQUFDLFVBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUMzQixFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZELENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLEVBQUUsQ0FBQyxVQUFVLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDM0IsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ3JCLENBQUM7UUFFRCxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO0lBRXBCLENBQUM7SUFDTCxVQUFDO0FBQUQsQ0F4TkEsQUF3TkMsSUFBQTtBQUVELElBQUksR0FBRyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLypcclxuYXBwOiBtYWluIGNhdmFuc1xyXG5sYXllcnMpICh0b3AgdG8gYm90dG9tKVxyXG5tZW51XHJcbmNpcmNsZXMocG9zaXRpb24pXHJcbiovXHJcbmZ1bmN0aW9uIGhzbFRvUmdiKGgsIHMsIGwpIHtcclxuICAgIHZhciByLCBnLCBiO1xyXG5cclxuICAgIGlmIChzID09IDApIHtcclxuICAgICAgICByID0gZyA9IGIgPSBsOyAvLyBhY2hyb21hdGljXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBodWUycmdiID0gZnVuY3Rpb24gaHVlMnJnYihwLCBxLCB0KSB7XHJcbiAgICAgICAgICAgIGlmICh0IDwgMCkgdCArPSAxO1xyXG4gICAgICAgICAgICBpZiAodCA+IDEpIHQgLT0gMTtcclxuICAgICAgICAgICAgaWYgKHQgPCAxIC8gNikgcmV0dXJuIHAgKyAocSAtIHApICogNiAqIHQ7XHJcbiAgICAgICAgICAgIGlmICh0IDwgMSAvIDIpIHJldHVybiBxO1xyXG4gICAgICAgICAgICBpZiAodCA8IDIgLyAzKSByZXR1cm4gcCArIChxIC0gcCkgKiAoMiAvIDMgLSB0KSAqIDY7XHJcbiAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHEgPSBsIDwgMC41ID8gbCAqICgxICsgcykgOiBsICsgcyAtIGwgKiBzO1xyXG4gICAgICAgIHZhciBwID0gMiAqIGwgLSBxO1xyXG4gICAgICAgIHIgPSBodWUycmdiKHAsIHEsIGggKyAxIC8gMyk7XHJcbiAgICAgICAgZyA9IGh1ZTJyZ2IocCwgcSwgaCk7XHJcbiAgICAgICAgYiA9IGh1ZTJyZ2IocCwgcSwgaCAtIDEgLyAzKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gXCJyZ2IoXCIgKyBNYXRoLnJvdW5kKHIgKiAyNTUpICsgXCIsXCIgKyBNYXRoLnJvdW5kKGcgKiAyNTUpICsgXCIsXCIgKyBNYXRoLnJvdW5kKGIgKiAyNTUpICsgXCIpXCI7XHJcbn1cclxuXHJcbmNsYXNzIFNjb3JlIHtcclxuICAgIHNjb3JlOiBudW1iZXI7XHJcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIGNvbnN0cnVjdG9yKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB3OiBudW1iZXIsIGg6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgICAgICB2bS5jdHggPSBjdHg7XHJcbiAgICAgICAgdm0uc2NvcmUgPSAwO1xyXG4gICAgICAgIHZtLncgPSB3O1xyXG4gICAgICAgIHZtLmggPSBoO1xyXG4gICAgfVxyXG4gICAgZHJhdygpIHtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uY3R4LmZpbGxTdHlsZSA9ICdibGFjayc7XHJcbiAgICAgICAgdm0uY3R4LmZvbnQgPSAnMjAwcHggVmVyZGFuYSc7XHJcbiAgICAgICAgdm0uY3R4LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgdm0uY3R4LmZpbGxUZXh0KHZtLnNjb3JlLnRvU3RyaW5nKCksIHZtLncgLyAyLCB2bS5oIC8gNSk7XHJcbiAgICB9XHJcbiAgICBhZGQoeDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLnNjb3JlICs9IHg7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENpcmNsZSB7XHJcbiAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICB3OiBudW1iZXI7XHJcbiAgICBoOiBudW1iZXI7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgICByOiBudW1iZXI7XHJcbiAgICBoc2w6IG51bWJlcltdO1xyXG4gICAgY29sb3I6IHN0cmluZztcclxuXHJcbiAgICB4bWluOiBudW1iZXI7XHJcbiAgICB4bWF4OiBudW1iZXI7XHJcbiAgICB5bWluOiBudW1iZXI7XHJcbiAgICB5bWF4OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHg6IG51bWJlciwgeTogbnVtYmVyLCB3OiBudW1iZXIsIGg6IG51bWJlciwgcjogbnVtYmVyLCBoc2w6IG51bWJlcltdKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLncgPSB3O1xyXG4gICAgICAgIHZtLmggPSBoO1xyXG4gICAgICAgIHZtLnggPSB4O1xyXG4gICAgICAgIHZtLnkgPSB5O1xyXG4gICAgICAgIHZtLnIgPSByO1xyXG4gICAgICAgIHZtLmhzbCA9IGhzbDtcclxuICAgICAgICB2bS5jb2xvciA9IGhzbFRvUmdiKHZtLmhzbFswXSwgdm0uaHNsWzFdLCB2bS5oc2xbMl0pO1xyXG5cclxuICAgICAgICAvLyB2bS5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICAvLyB2bS5jdHggPSB2bS5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICB2bS5jdHggPSBjdHg7XHJcbiAgICAgICAgdm0uc2l6ZUNhbnZhcygpO1xyXG5cclxuICAgICAgICB2bS54bWluID0gdm0ueCAtIHZtLnI7XHJcbiAgICAgICAgdm0ueG1heCA9IHZtLnggKyB2bS5yO1xyXG4gICAgICAgIHZtLnltaW4gPSB2bS55IC0gdm0ucjtcclxuICAgICAgICB2bS55bWF4ID0gdm0ueSArIHZtLnI7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNpemVDYW52YXMoKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLncgPSB2bS5jdHguY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgdm0uaCA9IHZtLmN0eC5jYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBkcmF3Q2lyY2xlKCkge1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgICAgICAvLyB2bS5jdHguY2xlYXJSZWN0KDAsMCx2bS53LHZtLmgpO1xyXG4gICAgICAgIHZtLmN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICB2bS5jdHguYXJjKHZtLngsIHZtLnksIHZtLnIsIDAsIE1hdGguUEkgKiAyKTtcclxuICAgICAgICB2bS5jdHguZmlsbFN0eWxlID0gdm0uY29sb3I7XHJcbiAgICAgICAgdm0uY3R4LmZpbGwoKTtcclxuICAgICAgICB2bS5jdHguY2xvc2VQYXRoKCk7XHJcbiAgICB9XHJcblxyXG5cclxufVxyXG5cclxuXHJcblxyXG5jbGFzcyBBcHAge1xyXG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgdzogbnVtYmVyO1xyXG4gICAgaDogbnVtYmVyO1xyXG4gICAgY2lyY2xlczogQ2lyY2xlW107XHJcbiAgICBiYWNrZ3JvdW5kQzogc3RyaW5nO1xyXG4gICAgYmFja0NpcmNsZTogQ2lyY2xlO1xyXG4gICAgY2hhbmdpbmc6IGJvb2xlYW47XHJcbiAgICBjb2xvcl9jaGFuZ2U6IGJvb2xlYW47XHJcbiAgICBzY29yZTogU2NvcmU7XHJcbiAgICBvcmRlcjogYW55W107XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIC8vQ29kZXBlbiBkb2Vzbid0IGxpa2UgY2FzdGluZyA6JyhcclxuICAgICAgICAvLyB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcclxuICAgICAgICB2bS5jYW52YXMgPSA8SFRNTENhbnZhc0VsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpO1xyXG4gICAgICAgIHZtLmN0eCA9IHZtLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgICB2bS5zaXplQ2FudmFzKCk7XHJcbiAgICAgICAgLy8gdm0uaW5pdEV2ZW50cygpO1xyXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKHQpID0+IHsgdm0uZHJhdyh0KTsgfSk7XHJcblxyXG4gICAgICAgIHZhciB0ZW1wID0gdm0ucm5naHNsKDAuOCk7XHJcblxyXG4gICAgICAgIHZtLmJhY2tncm91bmRDID0gaHNsVG9SZ2IodGVtcFswXSwgdGVtcFsxXSwgdGVtcFsyXSk7XHJcbiAgICAgICAgdm0uY2lyY2xlcyA9IFtdO1xyXG5cclxuICAgICAgICB2bS5jaXJjbGVzWzBdID0gbmV3IENpcmNsZSh2bS5jdHgsIDMgKiB2bS53IC8gMTIsIDUgKiB2bS5oIC8gMTEsIHZtLncsIHZtLmgsIHZtLncgLyA1LCB2bS5ybmdoc2woMC41KSk7XHJcbiAgICAgICAgdm0uY2lyY2xlc1sxXSA9IG5ldyBDaXJjbGUodm0uY3R4LCA5ICogdm0udyAvIDEyLCA1ICogdm0uaCAvIDExLCB2bS53LCB2bS5oLCB2bS53IC8gNSwgdm0ucm5naHNsKDAuNSkpO1xyXG4gICAgICAgIHZtLmNpcmNsZXNbMl0gPSBuZXcgQ2lyY2xlKHZtLmN0eCwgMyAqIHZtLncgLyAxMiwgOCAqIHZtLmggLyAxMSwgdm0udywgdm0uaCwgdm0udyAvIDUsIHZtLnJuZ2hzbCgwLjUpKTtcclxuICAgICAgICB2bS5jaXJjbGVzWzNdID0gbmV3IENpcmNsZSh2bS5jdHgsIDkgKiB2bS53IC8gMTIsIDggKiB2bS5oIC8gMTEsIHZtLncsIHZtLmgsIHZtLncgLyA1LCB2bS5ybmdoc2woMC41KSk7XHJcblxyXG4gICAgICAgIHZtLmJhY2tDaXJjbGUgPSBuZXcgQ2lyY2xlKHZtLmN0eCwgMCwgMCwgMCwgMCwgMCwgWzEsIDEsIDFdKTtcclxuICAgICAgICB2bS5jaGFuZ2luZyA9IGZhbHNlO1xyXG4gICAgICAgIHZtLmNvbG9yX2NoYW5nZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICB2bS5zY29yZSA9IG5ldyBTY29yZSh2bS5jdHgsIHZtLncsIHZtLmgpO1xyXG4gICAgICAgIHZtLm9yZGVyID0gW107XHJcblxyXG4gICAgICAgIHZtLmNhbGN1bGF0ZUNvbnRyYXN0T3JkZXIoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyh2bS5vcmRlcik7XHJcblxyXG4gICAgICAgIC8vIHZtLmNpcmNsZS5kcmF3Q2lyY2xlKCk7XHJcbiAgICAgICAgLy8gdm0uY3R4LmRyYXdJbWFnZSh2bS5jaXJjbGUuY2FudmFzLCAwLCAwKTtcclxuXHJcbiAgICAgICAgdm0uY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5jaXJjbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodm0uY2hhbmdpbmcgPT09IGZhbHNlICYmIChldmVudC5jbGllbnRYID4gdm0uY2lyY2xlc1tpXS54bWluICYmIGV2ZW50LmNsaWVudFggPCB2bS5jaXJjbGVzW2ldLnhtYXgpICYmIChldmVudC5jbGllbnRZID4gdm0uY2lyY2xlc1tpXS55bWluICYmIGV2ZW50LmNsaWVudFkgPCB2bS5jaXJjbGVzW2ldLnltYXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8xLiB3aWRlbiBjaXJjbGUgKGR1cGxpY2F0ZSBpdCkgdG8gc2NyZWVuIHNpemUsIGFuZCBpbmNyZWFzZSBsaWdodG5lc3MgbGVycD9cclxuICAgICAgICAgICAgICAgICAgICAvLzIuIHNldCBiYWNrZ3JvdW5kQyB0byBuZXcgY29sb3JcclxuICAgICAgICAgICAgICAgICAgICAvLzMuIHJlc2V0IGNvbG9ycyBcclxuICAgICAgICAgICAgICAgICAgICAvLzQuIHRyYW5zaXRpb24gY29sb3JzIGluIChzbWFsbCB0byBiaWcpXFxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gLy8gY29udmVydHMgaHVlIHRvIFswLDM2MF1cclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgeCA9IE1hdGguY2VpbCh2bS5iYWNrQ2lyY2xlLmhzbFswXSAqIDM2MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHkgPSBNYXRoLmNlaWwodm0uY2lyY2xlc1tpXS5oc2xbMF0gKiAzNjApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIC8vIGNhbGN1bGF0ZXMgY2xpY2tlZCBjb2xvciBhbmQgYmFja2dyb3VuZCBjb2xvcidzIGRpZmZlcmVuY2UgaW4gaHVlLiByZXR1cm5zIGEgbnVtYmVyIFswLCAxODBdXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKE1hdGguYWJzKHggLSB5KSA8IE1hdGguYWJzKCgzNjAgKyB5KSAtIHgpICYmIE1hdGguYWJzKHggLSB5KSA8IE1hdGguYWJzKHkgLSAoMzYwICsgeCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHZtLnNjb3JlLmFkZChNYXRoLmFicyh4IC0geSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfSBlbHNlIGlmIChNYXRoLmFicygoMzYwICsgeSkgLSB4KSA8IE1hdGguYWJzKHkgLSAoMzYwICsgeCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHZtLnNjb3JlLmFkZChNYXRoLmFicygoMzYwICsgeSkgLSB4KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgdm0uc2NvcmUuYWRkKE1hdGguYWJzKHkgLSAoMzYwICsgeCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCB2bS5vcmRlci5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZihpID09PSB2bS5vcmRlcltqXS5pZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLnNjb3JlLmFkZCgoaisxKSAqIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9ICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZtLmJhY2tDaXJjbGUuZHJhd0NpcmNsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmRyYXdDaXJjbGVzKCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB4LXkgaXMgc21hbGxlciB1c2UgaXQvLyBlbHNlIGlmIHkteCBpcyBzbWFsbGVyIHVzZSBpdFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyB2bS5zY29yZS5hZGQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogMC0zNjAgLSAwLTM2MCAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2bS5iYWNrQ2lyY2xlLnggPSB2bS5jaXJjbGVzW2ldLng7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uYmFja0NpcmNsZS55ID0gdm0uY2lyY2xlc1tpXS55O1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmJhY2tDaXJjbGUudyA9IHZtLmNpcmNsZXNbaV0udztcclxuICAgICAgICAgICAgICAgICAgICB2bS5iYWNrQ2lyY2xlLmggPSB2bS5jaXJjbGVzW2ldLmg7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uYmFja0NpcmNsZS5yID0gdm0uY2lyY2xlc1tpXS5yO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmJhY2tDaXJjbGUuaHNsID0gdm0uY2lyY2xlc1tpXS5oc2w7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uYmFja0NpcmNsZS5jb2xvciA9IHZtLmNpcmNsZXNbaV0uY29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uY2hhbmdpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmNvbG9yX2NoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdm0uYmFja0NpcmNsZSA9IHZtLmNpcmNsZXNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9XHJcbiAgICBpbml0RXZlbnRzKCkge1xyXG4gICAgICAgIHdpbmRvdy5vbnJlc2l6ZSA9IChlKSA9PiB7IHRoaXMuc2l6ZUNhbnZhcygpIH07XHJcbiAgICB9XHJcbiAgICBzaXplQ2FudmFzKCkge1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgICAgICB2bS53ID0gdm0uY3R4LmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIHZtLmggPSB2bS5jdHguY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIH1cclxuICAgIGNhbGN1bGF0ZU9uZVNjb3JlKGNpcmNsZSkge1xyXG4gICAgICAgIC8vIGNvbnZlcnRzIGh1ZSB0byBbMCwzNjBdXHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZhciB4ID0gTWF0aC5jZWlsKHZtLmJhY2tDaXJjbGUuaHNsWzBdICogMzYwKTtcclxuICAgICAgICB2YXIgeSA9IE1hdGguY2VpbChjaXJjbGUuaHNsWzBdICogMzYwKTtcclxuICAgICAgICAvLyBjYWxjdWxhdGVzIGNsaWNrZWQgY29sb3IgYW5kIGJhY2tncm91bmQgY29sb3IncyBkaWZmZXJlbmNlIGluIGh1ZS4gcmV0dXJucyBhIG51bWJlciBbMCwgMTgwXVxyXG4gICAgICAgIGlmIChNYXRoLmFicyh4IC0geSkgPCBNYXRoLmFicygoMzYwICsgeSkgLSB4KSAmJiBNYXRoLmFicyh4IC0geSkgPCBNYXRoLmFicyh5IC0gKDM2MCArIHgpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKE1hdGguYWJzKHggLSB5KSlcclxuICAgICAgICB9IGVsc2UgaWYgKE1hdGguYWJzKCgzNjAgKyB5KSAtIHgpIDwgTWF0aC5hYnMoeSAtICgzNjAgKyB4KSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChNYXRoLmFicygoMzYwICsgeSkgLSB4KSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChNYXRoLmFicyh5IC0gKDM2MCArIHgpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNhbGN1bGF0ZUNvbnRyYXN0T3JkZXIoKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIC8vbG9vcCB0aHJvdWdoIGNpcmNsZXNcclxuICAgICAgICAvLy9jYWxjc2NvcmVzXHJcbiAgICAgICAgLy8vcHV0IGluIG9iamVjdCB3aXRoIHNjb3JlIGFuZCBpZCBncmVhdGVzdCB0byBsZWFzdFxyXG4gICAgICAgIHZtLm9yZGVyID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5jaXJjbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gdm0uY2FsY3VsYXRlT25lU2NvcmUodm0uY2lyY2xlc1tpXSk7XHJcbiAgICAgICAgICAgIHZhciBsID0gdm0ub3JkZXIubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAobCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdm0ub3JkZXIucHVzaCh7IFwiaWRcIjogaSwgXCJzY29yZVwiOiB4IH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGwgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGw7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2bS5vcmRlcltqXS5zY29yZSA+IHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0ub3JkZXIuc3BsaWNlKGosIDAsICh7IFwiaWRcIjogaSwgXCJzY29yZVwiOiB4IH0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZtLm9yZGVyW2pdLnNjb3JlIDw9IHggJiYgaiA9PT0gKGwgLSAxKSkgeyAvL2lmIGxhc3QgaXRlcmF0aW9uIG9mIHZtLm9yZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLm9yZGVyLnB1c2goeyBcImlkXCI6IGksIFwic2NvcmVcIjogeCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VCYWNrQ29sb3IoY29sb3I6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgICAgICB2bS5iYWNrZ3JvdW5kQyA9IGNvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHJuZ2hzbChsKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZhciBoID0gKE1hdGgucmFuZG9tKCkgKiAzNjApIC8gMzYwO1xyXG4gICAgICAgIHZhciBzID0gMS4wO1xyXG4gICAgICAgIHJldHVybiBbaCwgcywgbF07XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRDb2xvcnMoKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uY2lyY2xlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2bS5jaXJjbGVzW2ldLnIgPSA1O1xyXG4gICAgICAgICAgICB2bS5jaXJjbGVzW2ldLmhzbCA9IHZtLnJuZ2hzbCgwLjUpO1xyXG4gICAgICAgICAgICB2bS5jaXJjbGVzW2ldLmNvbG9yID0gaHNsVG9SZ2Iodm0uY2lyY2xlc1tpXS5oc2xbMF0sIHZtLmNpcmNsZXNbaV0uaHNsWzFdLCB2bS5jaXJjbGVzW2ldLmhzbFsyXSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZtLmNhbGN1bGF0ZUNvbnRyYXN0T3JkZXIoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyh2bS5vcmRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0NpcmNsZXMoKSB7XHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uY2lyY2xlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodm0uY29sb3JfY2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICB2bS5yZXNldENvbG9ycygpO1xyXG4gICAgICAgICAgICAgICAgdm0uY29sb3JfY2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZtLmNpcmNsZXNbaV0uciA8ICh2bS53IC8gNSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKHZtLmNpcmNsZXNbaV0uciAvICh2bS53IC8gNSkpICogMC40NTsgLypyYXRpbyBvZiByYWRpdXMgdG8gc2l6ZSBbMC0xXSovXHJcbiAgICAgICAgICAgICAgICB2bS5jaXJjbGVzW2ldLnIgPSBNYXRoLmNlaWwodm0uY2lyY2xlc1tpXS5yICogKDEuNDUgLSB0KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdm0uY2lyY2xlc1tpXS5kcmF3Q2lyY2xlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXcodCkge1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCh0KSA9PiB7IHRoaXMuZHJhdyh0KTsgfSk7XHJcblxyXG4gICAgICAgIGlmICh2bS5jaGFuZ2luZyAmJiB2bS5iYWNrQ2lyY2xlLnIgPiB2bS5oKSB7LypyZXNldHMgdmFsdWVzIGZvciBhIHNwbGl0IHNlY29uZCB0byBlbmQqL1xyXG4gICAgICAgICAgICB2bS5jaGFuZ2luZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2bS5jaGFuZ2luZyAmJiB2bS5iYWNrQ2lyY2xlLnIgPiB2bS5oIC8gMikgeyAvKkluIHRoZSBwcm9jZXNzIG9mIGNoYW5naW5nIGFmdGVyIGl0IHBhc3NlcyBjaXJjbGVzKi9cclxuICAgICAgICAgICAgdm0uYmFja0NpcmNsZS5kcmF3Q2lyY2xlKCk7XHJcbiAgICAgICAgICAgIHZtLmJhY2tDaXJjbGUuciA9IE1hdGguY2VpbCh2bS5iYWNrQ2lyY2xlLnIgKiAxLjEpO1xyXG4gICAgICAgICAgICAvLyB2bS5yZXNldENvbG9ycygpO1xyXG4gICAgICAgICAgICB2bS5kcmF3Q2lyY2xlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2bS5jaGFuZ2luZykgeyAvKkluIHRoZSBwcm9jZXNzIG9mIGNoYW5naW5nKi9cclxuICAgICAgICAgICAgLy8gdm0uZHJhd0NpcmNsZXMoKTtcclxuICAgICAgICAgICAgdm0uYmFja0NpcmNsZS5kcmF3Q2lyY2xlKCk7XHJcbiAgICAgICAgICAgIHZtLmJhY2tDaXJjbGUuciA9IE1hdGguY2VpbCh2bS5iYWNrQ2lyY2xlLnIgKiAxLjEpO1xyXG4gICAgICAgIH0gZWxzZSB7IC8qU3RpbGwqL1xyXG4gICAgICAgICAgICB2bS5iYWNrQ2lyY2xlLmRyYXdDaXJjbGUoKTtcclxuICAgICAgICAgICAgdm0uZHJhd0NpcmNsZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZtLnNjb3JlLmRyYXcoKTtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBhcHAgPSBuZXcgQXBwKCk7Il19
