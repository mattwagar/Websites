(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/*
app: main cavans
layers) (top to bottom)
menu
circles(position)
*/
function hslToRgb(h, s, l) {
    var r, g, b;
    if (s == 0) {
        r = g = b = l; // achromatic
    }
    else {
        var hue2rgb = function hue2rgb(p, q, t) {
            if (t < 0)
                t += 1;
            if (t > 1)
                t -= 1;
            if (t < 1 / 6)
                return p + (q - p) * 6 * t;
            if (t < 1 / 2)
                return q;
            if (t < 2 / 3)
                return p + (q - p) * (2 / 3 - t) * 6;
            return p;
        };
        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        var p = 2 * l - q;
        r = hue2rgb(p, q, h + 1 / 3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1 / 3);
    }
    return "rgb(" + Math.round(r * 255) + "," + Math.round(g * 255) + "," + Math.round(b * 255) + ")";
}
var Score = (function () {
    function Score(ctx, w, h) {
        var vm = this;
        vm.ctx = ctx;
        vm.score = 0;
        vm.w = w;
        vm.h = h;
    }
    Score.prototype.draw = function () {
        var vm = this;
        vm.ctx.fillStyle = 'black';
        vm.ctx.font = '200px Verdana';
        vm.ctx.textAlign = "center";
        vm.ctx.fillText(vm.score.toString(), vm.w / 2, vm.h / 5);
    };
    Score.prototype.add = function (x) {
        var vm = this;
        vm.score += x;
    };
    return Score;
}());
var Circle = (function () {
    function Circle(ctx, x, y, w, h, r, hsl) {
        var vm = this;
        vm.w = w;
        vm.h = h;
        vm.x = x;
        vm.y = y;
        vm.r = r;
        vm.hsl = hsl;
        vm.color = hslToRgb(vm.hsl[0], vm.hsl[1], vm.hsl[2]);
        // vm.canvas = document.createElement('canvas');
        // vm.ctx = vm.canvas.getContext('2d');
        vm.ctx = ctx;
        vm.sizeCanvas();
        vm.xmin = vm.x - vm.r;
        vm.xmax = vm.x + vm.r;
        vm.ymin = vm.y - vm.r;
        vm.ymax = vm.y + vm.r;
    }
    Circle.prototype.sizeCanvas = function () {
        var vm = this;
        vm.w = vm.ctx.canvas.width = window.innerWidth;
        vm.h = vm.ctx.canvas.height = window.innerHeight;
    };
    Circle.prototype.drawCircle = function () {
        var vm = this;
        // vm.ctx.clearRect(0,0,vm.w,vm.h);
        vm.ctx.beginPath();
        vm.ctx.arc(vm.x, vm.y, vm.r, 0, Math.PI * 2);
        vm.ctx.fillStyle = vm.color;
        vm.ctx.fill();
        vm.ctx.closePath();
    };
    return Circle;
}());
var App = (function () {
    function App() {
        var vm = this;
        //Codepen doesn't like casting :'(
        // this.canvas = document.getElementById('canvas');
        vm.canvas = document.getElementById('canvas');
        vm.ctx = vm.canvas.getContext('2d');
        vm.sizeCanvas();
        // vm.initEvents();
        window.requestAnimationFrame(function (t) { vm.draw(t); });
        var temp = vm.rnghsl(0.8);
        vm.backgroundC = hslToRgb(temp[0], temp[1], temp[2]);
        vm.circles = [];
        vm.circles[0] = new Circle(vm.ctx, 3 * vm.w / 12, 5 * vm.h / 11, vm.w, vm.h, vm.w / 5, vm.rnghsl(0.5));
        vm.circles[1] = new Circle(vm.ctx, 9 * vm.w / 12, 5 * vm.h / 11, vm.w, vm.h, vm.w / 5, vm.rnghsl(0.5));
        vm.circles[2] = new Circle(vm.ctx, 3 * vm.w / 12, 8 * vm.h / 11, vm.w, vm.h, vm.w / 5, vm.rnghsl(0.5));
        vm.circles[3] = new Circle(vm.ctx, 9 * vm.w / 12, 8 * vm.h / 11, vm.w, vm.h, vm.w / 5, vm.rnghsl(0.5));
        vm.backCircle = new Circle(vm.ctx, 0, 0, 0, 0, 0, [1, 1, 1]);
        vm.changing = false;
        vm.color_change = false;
        vm.score = new Score(vm.ctx, vm.w, vm.h);
        // vm.circle.drawCircle();
        // vm.ctx.drawImage(vm.circle.canvas, 0, 0);
        vm.canvas.addEventListener('click', function (event) {
            for (var i = 0; i < vm.circles.length; i++) {
                if (vm.changing === false && (event.clientX > vm.circles[i].xmin && event.clientX < vm.circles[i].xmax) && (event.clientY > vm.circles[i].ymin && event.clientY < vm.circles[i].ymax)) {
                    //1. widen circle (duplicate it) to screen size, and increase lightness lerp?
                    //2. set backgroundC to new color
                    //3. reset colors 
                    //4. transition colors in (small to big)\
                    // converts hue to [0,360]
                    var x = Math.ceil(vm.backCircle.hsl[0] * 360);
                    var y = Math.ceil(vm.circles[i].hsl[0] * 360);
                    console.log(x + ' ; ' + y);
                    // calculates clicked color and background color's difference in hue. returns a number [0, 180]
                    if (Math.abs(x - y) < Math.abs((360 + y) - x) && Math.abs(x - y) < Math.abs(y - (360 + x))) {
                        console.log('1');
                        console.log(Math.abs(x - y));
                        vm.score.add(Math.abs(x - y));
                    }
                    else if (Math.abs((360 + y) - x) < Math.abs(y - (360 + x))) {
                        console.log('2');
                        console.log(Math.abs((360 + y) - x));
                        vm.score.add(Math.abs((360 + y) - x));
                    }
                    else {
                        console.log('3');
                        console.log(Math.abs(y - (360 + x)));
                        vm.score.add(Math.abs(y - (360 + x)));
                    }
                    vm.backCircle.drawCircle();
                    vm.drawCircles();
                    // if x-y is smaller use it// else if y-x is smaller use it
                    // vm.score.add();
                    /* 0-360 - 0-360 */
                    vm.backCircle.x = vm.circles[i].x;
                    vm.backCircle.y = vm.circles[i].y;
                    vm.backCircle.w = vm.circles[i].w;
                    vm.backCircle.h = vm.circles[i].h;
                    vm.backCircle.r = vm.circles[i].r;
                    vm.backCircle.hsl = vm.circles[i].hsl;
                    vm.backCircle.color = vm.circles[i].color;
                    vm.changing = true;
                    vm.color_change = true;
                }
            }
        });
    }
    App.prototype.initEvents = function () {
        var _this = this;
        window.onresize = function (e) { _this.sizeCanvas(); };
    };
    App.prototype.sizeCanvas = function () {
        var vm = this;
        vm.w = vm.ctx.canvas.width = window.innerWidth;
        vm.h = vm.ctx.canvas.height = window.innerHeight;
    };
    App.prototype.changeBackColor = function (color) {
        var vm = this;
        vm.backgroundC = color;
    };
    App.prototype.rnghsl = function (l) {
        var vm = this;
        var h = (Math.random() * 360) / 360;
        var s = 1.0;
        return [h, s, l];
    };
    App.prototype.resetColors = function () {
        var vm = this;
        for (var i = 0; i < vm.circles.length; i++) {
            vm.circles[i].r = 5;
            vm.circles[i].hsl = vm.rnghsl(0.5);
            vm.circles[i].color = hslToRgb(vm.circles[i].hsl[0], vm.circles[i].hsl[1], vm.circles[i].hsl[2]);
        }
    };
    App.prototype.drawCircles = function () {
        var vm = this;
        for (var i = 0; i < vm.circles.length; i++) {
            if (vm.color_change) {
                vm.resetColors();
                vm.color_change = false;
            }
            if (vm.circles[i].r < (vm.w / 5)) {
                var t = (vm.circles[i].r / (vm.w / 5)) * 0.45; /*ratio of radius to size [0-1]*/
                vm.circles[i].r = Math.ceil(vm.circles[i].r * (1.45 - t));
            }
            vm.circles[i].drawCircle();
        }
    };
    App.prototype.draw = function (t) {
        var _this = this;
        var vm = this;
        window.requestAnimationFrame(function (t) { _this.draw(t); });
        if (vm.changing && vm.backCircle.r > vm.h) {
            vm.changing = false;
        }
        else if (vm.changing && vm.backCircle.r > vm.h / 2) {
            vm.backCircle.drawCircle();
            vm.backCircle.r = Math.ceil(vm.backCircle.r * 1.1);
            // vm.resetColors();
            vm.drawCircles();
        }
        else if (vm.changing) {
            // vm.drawCircles();
            vm.backCircle.drawCircle();
            vm.backCircle.r = Math.ceil(vm.backCircle.r * 1.1);
        }
        else {
            vm.backCircle.drawCircle();
            vm.drawCircles();
        }
        vm.score.draw();
    };
    return App;
}());
var app = new App();
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOzs7OztFQUtFO0FBQ0Ysa0JBQWtCLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztJQUNyQixJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBRVosRUFBRSxDQUFBLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFBLENBQUM7UUFDUCxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxhQUFhO0lBQ2hDLENBQUM7SUFBQSxJQUFJLENBQUEsQ0FBQztRQUNGLElBQUksT0FBTyxHQUFHLGlCQUFpQixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDbEMsRUFBRSxDQUFBLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2pCLEVBQUUsQ0FBQSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNqQixFQUFFLENBQUEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFDLENBQUMsQ0FBQztnQkFBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDdkMsRUFBRSxDQUFBLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBQyxDQUFDLENBQUM7Z0JBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNyQixFQUFFLENBQUEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFDLENBQUMsQ0FBQztnQkFBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDL0MsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNiLENBQUMsQ0FBQTtRQUVELElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM5QyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNsQixDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzQixDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckIsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVELE1BQU0sQ0FBQyxNQUFNLEdBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUMsR0FBRyxHQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFDLEdBQUcsR0FBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBQyxHQUFHLENBQUM7QUFDNUYsQ0FBQztBQUVEO0lBS0UsZUFBWSxHQUE2QixFQUFFLENBQVMsRUFBRSxDQUFTO1FBQzdELElBQU0sRUFBRSxHQUFHLElBQUksQ0FBQztRQUNoQixFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNiLEVBQUUsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2IsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDVCxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNYLENBQUM7SUFDRCxvQkFBSSxHQUFKO1FBQ0UsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQztRQUMzQixFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxlQUFlLENBQUM7UUFDOUIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO1FBQzVCLEVBQUUsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLEVBQUMsRUFBRSxDQUFDLENBQUMsR0FBQyxDQUFDLEVBQUMsRUFBRSxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBQ0QsbUJBQUcsR0FBSCxVQUFJLENBQVE7UUFDVixJQUFNLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDaEIsRUFBRSxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUM7SUFDaEIsQ0FBQztJQUNILFlBQUM7QUFBRCxDQXZCQSxBQXVCQyxJQUFBO0FBRUQ7SUFnQkUsZ0JBQVksR0FBNEIsRUFBRSxDQUFTLEVBQUUsQ0FBUyxFQUFFLENBQVMsRUFBRSxDQUFTLEVBQUUsQ0FBUyxFQUFFLEdBQWE7UUFDNUcsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1QsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDVCxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNULEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1QsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDVCxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNiLEVBQUUsQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFckQsZ0RBQWdEO1FBQ2hELHVDQUF1QztRQUN2QyxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNiLEVBQUUsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUVoQixFQUFFLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0QixFQUFFLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0QixFQUFFLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0QixFQUFFLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUV4QixDQUFDO0lBRUQsMkJBQVUsR0FBVjtRQUNFLElBQU0sRUFBRSxHQUFHLElBQUksQ0FBQztRQUNoQixFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDO1FBQy9DLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUM7SUFFbkQsQ0FBQztJQUVELDJCQUFVLEdBQVY7UUFDRSxJQUFNLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDaEIsbUNBQW1DO1FBQ25DLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDbkIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDN0MsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztRQUM1QixFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2QsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUNyQixDQUFDO0lBR0gsYUFBQztBQUFELENBeERBLEFBd0RDLElBQUE7QUFJRDtJQVlFO1FBQ0UsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLGtDQUFrQztRQUNsQyxtREFBbUQ7UUFDbkQsRUFBRSxDQUFDLE1BQU0sR0FBc0IsUUFBUSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNqRSxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRXBDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNoQixtQkFBbUI7UUFDbkIsTUFBTSxDQUFDLHFCQUFxQixDQUFDLFVBQUMsQ0FBQyxJQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVyRCxJQUFJLElBQUksR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRTFCLEVBQUUsQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckQsRUFBRSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFFaEIsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUMsRUFBRSxDQUFDLENBQUMsR0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM3RixFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUMsRUFBRSxFQUFFLENBQUMsR0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzdGLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUMsRUFBRSxDQUFDLENBQUMsR0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDN0YsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUMsRUFBRSxDQUFDLENBQUMsR0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUU3RixFQUFFLENBQUMsVUFBVSxHQUFHLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0RCxFQUFFLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUNwQixFQUFFLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUV4QixFQUFFLENBQUMsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFekMsMEJBQTBCO1FBQzFCLDRDQUE0QztRQUU1QyxFQUFFLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxVQUFTLEtBQUs7WUFDaEQsR0FBRyxDQUFBLENBQUMsSUFBSSxDQUFDLEdBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBQyxDQUFDO2dCQUN4QyxFQUFFLENBQUEsQ0FBQyxFQUFFLENBQUMsUUFBUSxLQUFLLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxLQUFLLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQSxDQUFDO29CQUNwTCw2RUFBNkU7b0JBQzdFLGlDQUFpQztvQkFDakMsa0JBQWtCO29CQUNsQix5Q0FBeUM7b0JBRXpDLDBCQUEwQjtvQkFDMUIsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDNUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDNUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFFLENBQUMsQ0FBQyxDQUFDO29CQUMxQiwrRkFBK0Y7b0JBQy9GLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUM7d0JBQ3JGLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7d0JBQ2pCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDN0IsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtvQkFDL0IsQ0FBQztvQkFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDekQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQzt3QkFDakIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQ25DLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDdEMsQ0FBQztvQkFBQyxJQUFJLENBQUMsQ0FBQzt3QkFDTixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO3dCQUNqQixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDbkMsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN0QyxDQUFDO29CQUVELEVBQUUsQ0FBQyxVQUFVLENBQUMsVUFBVSxFQUFFLENBQUM7b0JBQzNCLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztvQkFHakIsMkRBQTJEO29CQUUzRCxrQkFBa0I7b0JBRWxCLG1CQUFtQjtvQkFFbkIsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ2xDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNsQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDbEMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ2xDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNsQyxFQUFFLENBQUMsVUFBVSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztvQkFDdEMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7b0JBQzFDLEVBQUUsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO29CQUNuQixFQUFFLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztnQkFHekIsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQTtJQUVKLENBQUM7SUFDRCx3QkFBVSxHQUFWO1FBQUEsaUJBRUM7UUFEQyxNQUFNLENBQUMsUUFBUSxHQUFHLFVBQUMsQ0FBQyxJQUFPLEtBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQSxDQUFDLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBQ0Qsd0JBQVUsR0FBVjtRQUNFLElBQU0sRUFBRSxHQUFHLElBQUksQ0FBQztRQUNoQixFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDO1FBQy9DLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUM7SUFDbkQsQ0FBQztJQUNELDZCQUFlLEdBQWYsVUFBZ0IsS0FBYTtRQUMzQixJQUFNLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDaEIsRUFBRSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7SUFDekIsQ0FBQztJQUVELG9CQUFNLEdBQU4sVUFBTyxDQUFDO1FBQ04sSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFDLEdBQUcsQ0FBQyxHQUFDLEdBQUcsQ0FBQztRQUNoQyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDWixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2pCLENBQUM7SUFFRCx5QkFBVyxHQUFYO1FBQ0UsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLEdBQUcsQ0FBQSxDQUFDLElBQUksQ0FBQyxHQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUMsQ0FBQztZQUN4QyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDcEIsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNuQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNsRyxDQUFDO0lBQ0gsQ0FBQztJQUVELHlCQUFXLEdBQVg7UUFDRSxJQUFNLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDaEIsR0FBRyxDQUFBLENBQUMsSUFBSSxDQUFDLEdBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBQyxDQUFDO1lBQ3hDLEVBQUUsQ0FBQSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQSxDQUFDO2dCQUNsQixFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQ2pCLEVBQUUsQ0FBQyxZQUFZLEdBQUUsS0FBSyxDQUFDO1lBQ3pCLENBQUM7WUFDRCxFQUFFLENBQUEsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxDQUFDO2dCQUM3QixJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLGlDQUFpQztnQkFDOUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksR0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzFELENBQUM7WUFDRCxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQzdCLENBQUM7SUFDSCxDQUFDO0lBRUQsa0JBQUksR0FBSixVQUFLLENBQUM7UUFBTixpQkF3QkM7UUF2QkMsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxVQUFDLENBQUMsSUFBTyxLQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdkQsRUFBRSxDQUFBLENBQUMsRUFBRSxDQUFDLFFBQVEsSUFBSSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUEsQ0FBQztZQUN4QyxFQUFFLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUN0QixDQUFDO1FBQ0QsSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUksRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsQ0FBQSxDQUFDO1lBQy9DLEVBQUUsQ0FBQyxVQUFVLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDM0IsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztZQUNuRCxvQkFBb0I7WUFDcEIsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ25CLENBQUM7UUFDRCxJQUFJLENBQUMsRUFBRSxDQUFBLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFBLENBQUM7WUFDbkIsb0JBQW9CO1lBQ3BCLEVBQUUsQ0FBQyxVQUFVLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDM0IsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztRQUNyRCxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixFQUFFLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQzNCLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNuQixDQUFDO1FBRUQsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUVsQixDQUFDO0lBQ0gsVUFBQztBQUFELENBcEtBLEFBb0tDLElBQUE7QUFFRCxJQUFJLEdBQUcsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qXHJcbmFwcDogbWFpbiBjYXZhbnNcclxubGF5ZXJzKSAodG9wIHRvIGJvdHRvbSlcclxubWVudVxyXG5jaXJjbGVzKHBvc2l0aW9uKVxyXG4qL1xyXG5mdW5jdGlvbiBoc2xUb1JnYihoLCBzLCBsKXtcclxuICAgIHZhciByLCBnLCBiO1xyXG5cclxuICAgIGlmKHMgPT0gMCl7XHJcbiAgICAgICAgciA9IGcgPSBiID0gbDsgLy8gYWNocm9tYXRpY1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgdmFyIGh1ZTJyZ2IgPSBmdW5jdGlvbiBodWUycmdiKHAsIHEsIHQpe1xyXG4gICAgICAgICAgICBpZih0IDwgMCkgdCArPSAxO1xyXG4gICAgICAgICAgICBpZih0ID4gMSkgdCAtPSAxO1xyXG4gICAgICAgICAgICBpZih0IDwgMS82KSByZXR1cm4gcCArIChxIC0gcCkgKiA2ICogdDtcclxuICAgICAgICAgICAgaWYodCA8IDEvMikgcmV0dXJuIHE7XHJcbiAgICAgICAgICAgIGlmKHQgPCAyLzMpIHJldHVybiBwICsgKHEgLSBwKSAqICgyLzMgLSB0KSAqIDY7XHJcbiAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHEgPSBsIDwgMC41ID8gbCAqICgxICsgcykgOiBsICsgcyAtIGwgKiBzO1xyXG4gICAgICAgIHZhciBwID0gMiAqIGwgLSBxO1xyXG4gICAgICAgIHIgPSBodWUycmdiKHAsIHEsIGggKyAxLzMpO1xyXG4gICAgICAgIGcgPSBodWUycmdiKHAsIHEsIGgpO1xyXG4gICAgICAgIGIgPSBodWUycmdiKHAsIHEsIGggLSAxLzMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBcInJnYihcIitNYXRoLnJvdW5kKHIgKiAyNTUpK1wiLFwiKyBNYXRoLnJvdW5kKGcgKiAyNTUpK1wiLFwiKyBNYXRoLnJvdW5kKGIgKiAyNTUpK1wiKVwiO1xyXG59XHJcblxyXG5jbGFzcyBTY29yZSB7XHJcbiAgc2NvcmU6IG51bWJlcjtcclxuICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICB3OiBudW1iZXI7XHJcbiAgaDogbnVtYmVyO1xyXG4gIGNvbnN0cnVjdG9yKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB3OiBudW1iZXIsIGg6IG51bWJlcil7XHJcbiAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICB2bS5jdHggPSBjdHg7XHJcbiAgICB2bS5zY29yZSA9IDA7XHJcbiAgICB2bS53ID0gdztcclxuICAgIHZtLmggPSBoO1xyXG4gIH1cclxuICBkcmF3KCl7XHJcbiAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICB2bS5jdHguZmlsbFN0eWxlID0gJ2JsYWNrJztcclxuICAgIHZtLmN0eC5mb250ID0gJzIwMHB4IFZlcmRhbmEnO1xyXG4gICAgdm0uY3R4LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICB2bS5jdHguZmlsbFRleHQodm0uc2NvcmUudG9TdHJpbmcoKSx2bS53LzIsdm0uaC81KTtcclxuICB9XHJcbiAgYWRkKHg6bnVtYmVyKXtcclxuICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgIHZtLnNjb3JlICs9IHg7XHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBDaXJjbGUge1xyXG4gIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgdzogbnVtYmVyO1xyXG4gIGg6IG51bWJlcjtcclxuICB4OiBudW1iZXI7XHJcbiAgeTogbnVtYmVyO1xyXG4gIHI6IG51bWJlcjtcclxuICBoc2w6IG51bWJlcltdO1xyXG4gIGNvbG9yOiBzdHJpbmc7XHJcblxyXG4gIHhtaW46bnVtYmVyO1xyXG4gIHhtYXg6bnVtYmVyO1xyXG4gIHltaW46bnVtYmVyO1xyXG4gIHltYXg6bnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3RvcihjdHg6Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB4OiBudW1iZXIsIHk6IG51bWJlciwgdzogbnVtYmVyLCBoOiBudW1iZXIsIHI6IG51bWJlciwgaHNsOiBudW1iZXJbXSkge1xyXG4gICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgdm0udyA9IHc7XHJcbiAgICB2bS5oID0gaDtcclxuICAgIHZtLnggPSB4O1xyXG4gICAgdm0ueSA9IHk7XHJcbiAgICB2bS5yID0gcjtcclxuICAgIHZtLmhzbCA9IGhzbDtcclxuICAgIHZtLmNvbG9yID0gaHNsVG9SZ2Iodm0uaHNsWzBdLCB2bS5oc2xbMV0sIHZtLmhzbFsyXSk7XHJcblxyXG4gICAgLy8gdm0uY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAvLyB2bS5jdHggPSB2bS5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIHZtLmN0eCA9IGN0eDtcclxuICAgIHZtLnNpemVDYW52YXMoKTtcclxuXHJcbiAgICB2bS54bWluID0gdm0ueCAtIHZtLnI7XHJcbiAgICB2bS54bWF4ID0gdm0ueCArIHZtLnI7XHJcbiAgICB2bS55bWluID0gdm0ueSAtIHZtLnI7XHJcbiAgICB2bS55bWF4ID0gdm0ueSArIHZtLnI7XHJcblxyXG4gIH1cclxuXHJcbiAgc2l6ZUNhbnZhcygpIHtcclxuICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgIHZtLncgPSB2bS5jdHguY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICB2bS5oID0gdm0uY3R4LmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gIH1cclxuXHJcbiAgZHJhd0NpcmNsZSgpIHtcclxuICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgIC8vIHZtLmN0eC5jbGVhclJlY3QoMCwwLHZtLncsdm0uaCk7XHJcbiAgICB2bS5jdHguYmVnaW5QYXRoKCk7ICAgIFxyXG4gICAgdm0uY3R4LmFyYyh2bS54LCB2bS55LCB2bS5yLCAwLCBNYXRoLlBJICogMik7XHJcbiAgICB2bS5jdHguZmlsbFN0eWxlID0gdm0uY29sb3I7XHJcbiAgICB2bS5jdHguZmlsbCgpO1xyXG4gICAgdm0uY3R4LmNsb3NlUGF0aCgpO1xyXG4gIH1cclxuXHJcbiAgXHJcbn1cclxuXHJcblxyXG5cclxuY2xhc3MgQXBwIHtcclxuICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gIHc6IG51bWJlcjtcclxuICBoOiBudW1iZXI7XHJcbiAgY2lyY2xlczogQ2lyY2xlW107XHJcbiAgYmFja2dyb3VuZEM6IHN0cmluZztcclxuICBiYWNrQ2lyY2xlOiBDaXJjbGU7XHJcbiAgY2hhbmdpbmc6IGJvb2xlYW47XHJcbiAgY29sb3JfY2hhbmdlOiBib29sZWFuO1xyXG4gIHNjb3JlOiBTY29yZTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICAvL0NvZGVwZW4gZG9lc24ndCBsaWtlIGNhc3RpbmcgOicoXHJcbiAgICAvLyB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcclxuICAgIHZtLmNhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJyk7XHJcbiAgICB2bS5jdHggPSB2bS5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICB2bS5zaXplQ2FudmFzKCk7XHJcbiAgICAvLyB2bS5pbml0RXZlbnRzKCk7XHJcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCh0KSA9PiB7IHZtLmRyYXcodCk7IH0pO1xyXG5cclxuICAgIHZhciB0ZW1wID0gdm0ucm5naHNsKDAuOCk7XHJcblxyXG4gICAgdm0uYmFja2dyb3VuZEMgPSBoc2xUb1JnYih0ZW1wWzBdLCB0ZW1wWzFdLCB0ZW1wWzJdKTtcclxuICAgIHZtLmNpcmNsZXMgPSBbXTtcclxuXHJcbiAgICB2bS5jaXJjbGVzWzBdID0gbmV3IENpcmNsZSh2bS5jdHgsIDMqdm0udy8xMiwgNSp2bS5oLzExLCB2bS53LCB2bS5oLCB2bS53LzUsIHZtLnJuZ2hzbCgwLjUpKTtcclxuICAgIHZtLmNpcmNsZXNbMV0gPSBuZXcgQ2lyY2xlKHZtLmN0eCwgOSp2bS53LzEyLCA1KnZtLmgvMTEsIHZtLncsIHZtLmgsIHZtLncvNSwgdm0ucm5naHNsKDAuNSkpO1xyXG4gICAgdm0uY2lyY2xlc1syXSA9IG5ldyBDaXJjbGUodm0uY3R4LCAzKnZtLncvMTIsIDgqdm0uaC8xMSwgdm0udywgdm0uaCwgdm0udy81LCB2bS5ybmdoc2woMC41KSk7XHJcbiAgICB2bS5jaXJjbGVzWzNdID0gbmV3IENpcmNsZSh2bS5jdHgsIDkqdm0udy8xMiwgOCp2bS5oLzExLCB2bS53LCB2bS5oLCB2bS53LzUsIHZtLnJuZ2hzbCgwLjUpKTtcclxuXHJcbiAgICB2bS5iYWNrQ2lyY2xlID0gbmV3IENpcmNsZSh2bS5jdHgsIDAsMCwwLDAsMCxbMSwxLDFdKTtcclxuICAgIHZtLmNoYW5naW5nID0gZmFsc2U7XHJcbiAgICB2bS5jb2xvcl9jaGFuZ2UgPSBmYWxzZTtcclxuXHJcbiAgICB2bS5zY29yZSA9IG5ldyBTY29yZSh2bS5jdHgsIHZtLncsIHZtLmgpO1xyXG4gICAgXHJcbiAgICAvLyB2bS5jaXJjbGUuZHJhd0NpcmNsZSgpO1xyXG4gICAgLy8gdm0uY3R4LmRyYXdJbWFnZSh2bS5jaXJjbGUuY2FudmFzLCAwLCAwKTtcclxuXHJcbiAgICB2bS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgIGZvcih2YXIgaSA9MDsgaSA8IHZtLmNpcmNsZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGlmKHZtLmNoYW5naW5nID09PSBmYWxzZSAmJiAoZXZlbnQuY2xpZW50WCA+IHZtLmNpcmNsZXNbaV0ueG1pbiAmJiBldmVudC5jbGllbnRYIDwgdm0uY2lyY2xlc1tpXS54bWF4KSAmJiAoZXZlbnQuY2xpZW50WSA+IHZtLmNpcmNsZXNbaV0ueW1pbiAmJiBldmVudC5jbGllbnRZIDwgdm0uY2lyY2xlc1tpXS55bWF4KSl7XHJcbiAgICAgICAgICAvLzEuIHdpZGVuIGNpcmNsZSAoZHVwbGljYXRlIGl0KSB0byBzY3JlZW4gc2l6ZSwgYW5kIGluY3JlYXNlIGxpZ2h0bmVzcyBsZXJwP1xyXG4gICAgICAgICAgLy8yLiBzZXQgYmFja2dyb3VuZEMgdG8gbmV3IGNvbG9yXHJcbiAgICAgICAgICAvLzMuIHJlc2V0IGNvbG9ycyBcclxuICAgICAgICAgIC8vNC4gdHJhbnNpdGlvbiBjb2xvcnMgaW4gKHNtYWxsIHRvIGJpZylcXFxyXG5cclxuICAgICAgICAgIC8vIGNvbnZlcnRzIGh1ZSB0byBbMCwzNjBdXHJcbiAgICAgICAgICB2YXIgeCA9IE1hdGguY2VpbCh2bS5iYWNrQ2lyY2xlLmhzbFswXSozNjApO1xyXG4gICAgICAgICAgdmFyIHkgPSBNYXRoLmNlaWwodm0uY2lyY2xlc1tpXS5oc2xbMF0qMzYwKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHggKyAnIDsgJysgeSk7XHJcbiAgICAgICAgICAvLyBjYWxjdWxhdGVzIGNsaWNrZWQgY29sb3IgYW5kIGJhY2tncm91bmQgY29sb3IncyBkaWZmZXJlbmNlIGluIGh1ZS4gcmV0dXJucyBhIG51bWJlciBbMCwgMTgwXVxyXG4gICAgICAgICAgaWYoTWF0aC5hYnMoeCAtIHkpIDwgTWF0aC5hYnMoKDM2MCt5KSAtIHgpICYmIE1hdGguYWJzKHggLSB5KSA8IE1hdGguYWJzKHkgLSAoMzYwK3gpKSl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCcxJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKE1hdGguYWJzKHggLSB5KSk7XHJcbiAgICAgICAgICAgIHZtLnNjb3JlLmFkZChNYXRoLmFicyh4IC0geSkpXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKE1hdGguYWJzKCgzNjAreSkgLSB4KSA8IE1hdGguYWJzKHkgLSAoMzYwK3gpKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnMicpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhNYXRoLmFicygoMzYwK3kpIC0geCkpO1xyXG4gICAgICAgICAgICB2bS5zY29yZS5hZGQoTWF0aC5hYnMoKDM2MCt5KSAtIHgpKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCczJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKE1hdGguYWJzKHkgLSAoMzYwK3gpKSk7XHJcbiAgICAgICAgICAgIHZtLnNjb3JlLmFkZChNYXRoLmFicyh5IC0gKDM2MCt4KSkpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZtLmJhY2tDaXJjbGUuZHJhd0NpcmNsZSgpO1xyXG4gICAgICAgICAgdm0uZHJhd0NpcmNsZXMoKTtcclxuICAgICAgICAgIFxyXG5cclxuICAgICAgICAgIC8vIGlmIHgteSBpcyBzbWFsbGVyIHVzZSBpdC8vIGVsc2UgaWYgeS14IGlzIHNtYWxsZXIgdXNlIGl0XHJcblxyXG4gICAgICAgICAgLy8gdm0uc2NvcmUuYWRkKCk7XHJcblxyXG4gICAgICAgICAgLyogMC0zNjAgLSAwLTM2MCAqL1xyXG5cclxuICAgICAgICAgIHZtLmJhY2tDaXJjbGUueCA9IHZtLmNpcmNsZXNbaV0ueDtcclxuICAgICAgICAgIHZtLmJhY2tDaXJjbGUueSA9IHZtLmNpcmNsZXNbaV0ueTtcclxuICAgICAgICAgIHZtLmJhY2tDaXJjbGUudyA9IHZtLmNpcmNsZXNbaV0udzsgXHJcbiAgICAgICAgICB2bS5iYWNrQ2lyY2xlLmggPSB2bS5jaXJjbGVzW2ldLmg7IFxyXG4gICAgICAgICAgdm0uYmFja0NpcmNsZS5yID0gdm0uY2lyY2xlc1tpXS5yOyBcclxuICAgICAgICAgIHZtLmJhY2tDaXJjbGUuaHNsID0gdm0uY2lyY2xlc1tpXS5oc2w7XHJcbiAgICAgICAgICB2bS5iYWNrQ2lyY2xlLmNvbG9yID0gdm0uY2lyY2xlc1tpXS5jb2xvcjtcclxuICAgICAgICAgIHZtLmNoYW5naW5nID0gdHJ1ZTtcclxuICAgICAgICAgIHZtLmNvbG9yX2NoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAvLyB2bS5iYWNrQ2lyY2xlID0gdm0uY2lyY2xlc1tpXTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICB9XHJcbiAgaW5pdEV2ZW50cygpIHtcclxuICAgIHdpbmRvdy5vbnJlc2l6ZSA9IChlKSA9PiB7IHRoaXMuc2l6ZUNhbnZhcygpIH07XHJcbiAgfVxyXG4gIHNpemVDYW52YXMoKSB7XHJcbiAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICB2bS53ID0gdm0uY3R4LmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgdm0uaCA9IHZtLmN0eC5jYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gIH1cclxuICBjaGFuZ2VCYWNrQ29sb3IoY29sb3I6IHN0cmluZyl7XHJcbiAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICB2bS5iYWNrZ3JvdW5kQyA9IGNvbG9yO1xyXG4gIH1cclxuXHJcbiAgcm5naHNsKGwpe1xyXG4gICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgdmFyIGggPSAoTWF0aC5yYW5kb20oKSozNjApLzM2MDtcclxuICAgIHZhciBzID0gMS4wO1xyXG4gICAgcmV0dXJuIFtoLHMsbF07XHJcbiAgfVxyXG5cclxuICByZXNldENvbG9ycygpe1xyXG4gICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgZm9yKHZhciBpID0wOyBpIDwgdm0uY2lyY2xlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgIHZtLmNpcmNsZXNbaV0uciA9IDU7XHJcbiAgICAgIHZtLmNpcmNsZXNbaV0uaHNsID0gdm0ucm5naHNsKDAuNSk7XHJcbiAgICAgIHZtLmNpcmNsZXNbaV0uY29sb3IgPSBoc2xUb1JnYih2bS5jaXJjbGVzW2ldLmhzbFswXSwgdm0uY2lyY2xlc1tpXS5oc2xbMV0sIHZtLmNpcmNsZXNbaV0uaHNsWzJdKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZHJhd0NpcmNsZXMoKXtcclxuICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgIGZvcih2YXIgaSA9MDsgaSA8IHZtLmNpcmNsZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICBpZih2bS5jb2xvcl9jaGFuZ2Upe1xyXG4gICAgICAgIHZtLnJlc2V0Q29sb3JzKCk7XHJcbiAgICAgICAgdm0uY29sb3JfY2hhbmdlPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZih2bS5jaXJjbGVzW2ldLnIgPCAodm0udy81KSl7XHJcbiAgICAgICAgdmFyIHQgPSAodm0uY2lyY2xlc1tpXS5yIC8gKHZtLncvNSkpICogMC40NTsgLypyYXRpbyBvZiByYWRpdXMgdG8gc2l6ZSBbMC0xXSovXHJcbiAgICAgICAgdm0uY2lyY2xlc1tpXS5yID0gTWF0aC5jZWlsKHZtLmNpcmNsZXNbaV0uciAqICgxLjQ1LXQpKTtcclxuICAgICAgfVxyXG4gICAgICB2bS5jaXJjbGVzW2ldLmRyYXdDaXJjbGUoKTsgXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGRyYXcodCkge1xyXG4gICAgY29uc3Qgdm0gPSB0aGlzO1xyXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgodCkgPT4geyB0aGlzLmRyYXcodCk7IH0pO1xyXG5cclxuICAgIGlmKHZtLmNoYW5naW5nICYmIHZtLmJhY2tDaXJjbGUuciA+IHZtLmgpey8qcmVzZXRzIHZhbHVlcyBmb3IgYSBzcGxpdCBzZWNvbmQgdG8gZW5kKi9cclxuICAgICAgdm0uY2hhbmdpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYodm0uY2hhbmdpbmcgJiYgdm0uYmFja0NpcmNsZS5yID4gdm0uaC8yKXsgLypJbiB0aGUgcHJvY2VzcyBvZiBjaGFuZ2luZyBhZnRlciBpdCBwYXNzZXMgY2lyY2xlcyovXHJcbiAgICAgIHZtLmJhY2tDaXJjbGUuZHJhd0NpcmNsZSgpO1xyXG4gICAgICB2bS5iYWNrQ2lyY2xlLnIgPSBNYXRoLmNlaWwodm0uYmFja0NpcmNsZS5yICogMS4xKTtcclxuICAgICAgLy8gdm0ucmVzZXRDb2xvcnMoKTtcclxuICAgICAgdm0uZHJhd0NpcmNsZXMoKTtcclxuICAgIH0gXHJcbiAgICBlbHNlIGlmKHZtLmNoYW5naW5nKXsgLypJbiB0aGUgcHJvY2VzcyBvZiBjaGFuZ2luZyovXHJcbiAgICAgIC8vIHZtLmRyYXdDaXJjbGVzKCk7XHJcbiAgICAgIHZtLmJhY2tDaXJjbGUuZHJhd0NpcmNsZSgpO1xyXG4gICAgICB2bS5iYWNrQ2lyY2xlLnIgPSBNYXRoLmNlaWwodm0uYmFja0NpcmNsZS5yICogMS4xKTtcclxuICAgIH0gZWxzZSB7IC8qU3RpbGwqL1xyXG4gICAgICB2bS5iYWNrQ2lyY2xlLmRyYXdDaXJjbGUoKTtcclxuICAgICAgdm0uZHJhd0NpcmNsZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICB2bS5zY29yZS5kcmF3KCk7XHJcbiAgICBcclxuICB9XHJcbn1cclxuXHJcbnZhciBhcHAgPSBuZXcgQXBwKCk7Il19
